System.register("chunks:///_virtual/AdManger.ts",["cc","./WxPlatform.ts","./BytePlantform.ts","./Logger.ts"],(function(o){var t,s,e,n,a,r;return{setters:[function(o){t=o.cclegacy,s=o._decorator,e=o.sys},function(o){n=o.WxPlatform},function(o){a=o.BytePlantform},function(o){r=o.Logger}],execute:function(){var i;t._RF.push({},"829ecAfsu5DUYSbRAeKLqBA","AdManger",void 0);var c=s.ccclass;s.property,o("AdManger",c("AdManger")(i=function(){function o(){}return o.show_interstial=function(o){switch(e.platform){case e.Platform.WECHAT_GAME:n.ins.show_interstitial(1);break;case e.Platform.BYTEDANCE_MINI_GAME:a.ins.show_interstitial(1)}},o.show_video=function(o){switch(e.platform){case e.Platform.WECHAT_GAME:n.ins.show_reward_video((function(t){1==t?(console.log("show_video 获取奖励成功"),o(t)):(console.log("show_video 获取奖励失败"),o(t))}));break;case e.Platform.BYTEDANCE_MINI_GAME:a.ins.ShowAdvertisements((function(t){1==t?(r.log("show_video 获取奖励成功"),o(t)):(r.log("show_video 获取奖励失败"),o(t))}));break;case e.Platform.MOBILE_BROWSER:case e.Platform.DESKTOP_BROWSER:o(1);break;default:o(0)}},o.show_banner=function(){switch(e.platform){case e.Platform.BYTEDANCE_MINI_GAME:a.ins.show_banner()}},o.show_custom=function(){switch(e.platform){case e.Platform.WECHAT_GAME:n.ins.show_custom_ad()}},o.close_ad=function(){switch(e.platform){case e.Platform.WECHAT_GAME:n.ins.hide_banner(),n.ins.hide_custom();break;case e.Platform.BYTEDANCE_MINI_GAME:a.ins.hide_banner()}},o}())||i);t._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./Enums.ts","./Logger.ts"],(function(o){var i,t,e,s,r,a,n,_,u,c,d,l;return{setters:[function(o){i=o.inheritsLoose,t=o.createClass},function(o){e=o.cclegacy,s=o._decorator,r=o.Node,a=o.director,n=o.AudioSource,_=o.Component},function(o){u=o.Global},function(o){c=o,d=o.GAME_STATE},function(o){l=o.Logger}],execute:function(){var h,f;e._RF.push({},"9e50b6W82NDC6OkohLgcsi8","AudioManager",void 0);var g=s.ccclass;s.property,o("AudioManager",g("AudioManager")(((f=function(o){function e(){for(var i,t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];return(i=o.call.apply(o,[this].concat(e))||this).audio_source_for_short=null,i.audio_source_for_short_3=null,i.audio_source_for_bg=null,i.clip_map={},i._isBGAudioPlaying=!1,i}i(e,o);var s=e.prototype;return s.onLoad=function(){null===e._instance&&(e._instance=this,this.init())},s.init=function(){var o=new r("AudioShort1");a.getScene().addChild(o),this.audio_source_for_short=o.addComponent(n),this.audio_source_for_short.playOnAwake=!1,this.audio_source_for_short.volume=1,a.addPersistRootNode(o);var i=new r("AudioBackground");a.getScene().addChild(i),this.audio_source_for_bg=i.addComponent(n),this.audio_source_for_bg.playOnAwake=!1,this.audio_source_for_bg.volume=1,this.audio_source_for_bg.loop=!0,a.addPersistRootNode(i);var t=new r("AudioShort2");a.getScene().addChild(t),this.audio_source_for_short_3=t.addComponent(n),this.audio_source_for_short_3.playOnAwake=!1,this.audio_source_for_short_3.volume=.3,a.addPersistRootNode(t)},s.update=function(o){this.audio_source_for_bg&&c&&u.get_game_state&&(u.get_game_state()===d.START?!this._isBGAudioPlaying&&this.audio_source_for_bg.clip&&(this.audio_source_for_bg.play(),this._isBGAudioPlaying=!0):this._isBGAudioPlaying&&(this.audio_source_for_bg.pause(),this._isBGAudioPlaying=!1))},s.set_bg_clip=function(o){this.audio_source_for_bg.clip=o,u.get_game_state()===d.START&&(this.audio_source_for_bg.play(),this._isBGAudioPlaying=!0)},s.add_clip=function(o,i){this.clip_map[o]=i},s.play_shot=function(o){if(u.open_sound){var i=this.clip_map[o];i&&this.audio_source_for_short.playOneShot(i)}},s.play_shot_3=function(o){if(u.open_sound){var i=this.clip_map[o];i&&this.audio_source_for_short_3.playOneShot(i)}},t(e,null,[{key:"instance",get:function(){return this._instance||l.error("AudioManager accessed before initialization or after destruction!"),this._instance}}]),e}(_))._instance=null,h=f))||h);e._RF.pop()}}}));

System.register("chunks:///_virtual/BackgroundAnimator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts"],(function(t){var r,e,o,i,n,a,l,c,s,u,p;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,l=t.Sprite,c=t.Camera,s=t.Color,u=t.Component},function(t){p=t.Logger}],execute:function(){var h,d,g,m,_,b,f,C,k,y,w;n._RF.push({},"34b74PBBARNwqI/+nE69ay8","BackgroundAnimator",void 0);var P=a.ccclass,S=a.property;t("BackgroundAnimator",(h=P("BackgroundAnimator"),d=S({type:l}),g=S({type:c}),m=S({type:[s],tooltip:"定义颜色调色板，颜色将在这些颜色之间循环过渡。"}),_=S({tooltip:"每次颜色渐变完成的时长（秒）。"}),h((C=r((f=function(t){function r(){for(var r,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return r=t.call.apply(t,[this].concat(n))||this,o(r,"backgroundSprite",C,i(r)),o(r,"game_camera",k,i(r)),o(r,"colorPalette",y,i(r)),o(r,"duration",w,i(r)),r._currentColorIndex=0,r._totalTime=0,r._startColor=new s,r._endColor=new s,r._lerpedColor=new s,r}e(r,t);var n=r.prototype;return n.start=function(){var t,r;if(this.backgroundSprite||p.error("【BackgroundAnimator 错误】请确保 backgroundSprite 属性已赋值!"),this.colorPalette.length<2)return this.backgroundSprite.color=null!=(t=null==(r=this.colorPalette[0])?void 0:r.clone())?t:s.WHITE.clone(),void p.warn("颜色调色板数量不足，颜色动画将被禁用。");this.backgroundSprite.color=this.colorPalette[0].clone(),this.setNextTargetColor()},n.setNextTargetColor=function(){this.backgroundSprite&&(this._totalTime=0,this._startColor.set(this.backgroundSprite.color),this._currentColorIndex=(this._currentColorIndex+1)%this.colorPalette.length,this._endColor.set(this.colorPalette[this._currentColorIndex]))},n.update=function(t){if(this.game_camera&&this.game_camera.node&&this.node.setPosition(this.game_camera.node.position),this.backgroundSprite&&!(this.colorPalette.length<2)){this.duration<=0&&(this.duration=.001),this._totalTime+=t;var r=Math.min(this._totalTime/this.duration,1);s.lerp(this._lerpedColor,this._startColor,this._endColor,r),this.backgroundSprite.color=this._lerpedColor,r>=1&&this.setNextTargetColor()}},r}(u)).prototype,"backgroundSprite",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=r(f.prototype,"game_camera",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=r(f.prototype,"colorPalette",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[new s(50,50,150),new s(150,50,50),new s(50,150,50),new s(150,150,50)]}}),w=r(f.prototype,"duration",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),b=f))||b));n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseWindows.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AdManger.ts","./Enums.ts","./Global.ts"],(function(t){var n,e,o,s,i,c,a,r,l,u,h,d,w;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){i=t.cclegacy,c=t._decorator,a=t.Node,r=t.Vec3,l=t.tween,u=t.Component},function(t){h=t.AdManger},function(t){d=t.GAME_STATE},function(t){w=t.Global}],execute:function(){var f,p,_,g,v;i._RF.push({},"0af1eRV8Z9Fw5NUWnC973t7","BaseWindows",void 0);var m=c.ccclass,y=c.property;t("BaseWindows",(f=m("BaseWindows"),p=y(a),f((v=n((g=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),c=0;c<e;c++)i[c]=arguments[c];return n=t.call.apply(t,[this].concat(i))||this,o(n,"content",v,s(n)),n}e(n,t);var i=n.prototype;return i.start=function(){},i.update=function(t){},i.show_windows=function(t,n){void 0===n&&(n=d.PAUSE),w.set_game_state(n,"BaseWindows.show>"+this.node.name),this.node.active=!0,this.node.setSiblingIndex(this.node.parent.children.length-1),this.show_content_tween(),"Loading"==this.node.name||h.show_custom()},i.show_content_tween=function(){this.content&&(this.content.setScale(new r(.35,.35,.35)),l(this.content).to(.2,{scale:r.ONE}).call((function(){})).start())},i.close_windows=function(t,n){var e=this,o=function(){e.node.active=!1,t&&w.set_game_state(t,"BaseWindows.close"),h.show_interstial(),h.close_ad(),n&&n()};this.content&&this.content.active?(this.content.setScale(new r(1,1,1)),l(this.content).to(.2,{scale:r.ZERO}).call(o).start()):o()},n}(u)).prototype,"content",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=g))||_));i._RF.pop()}}}));

System.register("chunks:///_virtual/BubuAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./AudioManager.ts","./Logger.ts","./ResourceManger.ts","./XStorage.ts"],(function(i){var t,e,o,n,s,a,r,l,h,c,p,u,d,_,m,g,f,T,b,P,y,w,D,v,N;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){s=i.cclegacy,a=i._decorator,r=i.Node,l=i.RigidBody2D,h=i.v3,c=i.Graphics,p=i.CircleCollider2D,u=i.Contact2DType,d=i.Vec3,_=i.Sprite,m=i.Tween,g=i.tween,f=i.Color,T=i.Component},function(i){b=i.DIR,P=i.GAME_STATE},function(i){y=i.Global},function(i){w=i.AudioManager},function(i){D=i.Logger},function(i){v=i.default},function(i){N=i.XStorage}],execute:function(){var S,A,C,x,O,R,z,I,B,G,H,L,E,M,W;s._RF.push({},"03405njlbdKPY8bOHEKcYun","BubuAction",void 0);var F=a.ccclass,k=a.property;i("BubuAction",(S=F("BubuAction"),A=k(r),C=k(l),x=k({displayName:"Bullet Half Length (px)",tooltip:"子弹中心到尾部的距离，用于定位轨迹起点",range:[0,50,1]}),O=k({displayName:"Max Trail Time (s)",tooltip:"尾迹持续时间，单位：秒",range:[.1,2,.1]}),R=k({displayName:"Sample Distance (px)",tooltip:"子弹移动超过此距离才会记录新的尾迹点"}),z=k({displayName:"Start Width",tooltip:"尾迹的初始宽度 (最靠近子弹的地方)",range:[1,20,1]}),S((G=t((B=function(i){function t(){for(var t,e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return t=i.call.apply(i,[this].concat(s))||this,o(t,"bubu_1_node",G,n(t)),o(t,"rigid",H,n(t)),t.direction=b.RIGHT,o(t,"bulletHalfLength",L,n(t)),o(t,"maxTrailTime",E,n(t)),o(t,"minDistanceForSample",M,n(t)),o(t,"startWidth",W,n(t)),t.graphics=null,t.trailPoints=[],t.lastSamplePosition=h(),t._collider_2D=null,t._tempPos=h(),t._tempNewPos=h(),t._tempTrailStartOffset=h(),t.game_layer_action=void 0,t.soundInterval=.05,t.soundTimer=0,t}e(t,i);var s=t.prototype;return s.onLoad=function(){this.graphics=this.getComponent(c),this.graphics||D.error("BubuAction requires a Graphics component on the same node to draw the trail."),this.rigid&&D.log("rigid.type>>>>",this.rigid.type),this.lastSamplePosition.set(this.node.position),this._collider_2D=this.getComponent(p),this._collider_2D?(this._collider_2D.on(u.BEGIN_CONTACT,this.on_collider_begin,this),this._collider_2D.on(u.END_CONTACT,this.on_collider_end,this)):D.warn("BubuAction needs a Collider2D component for collision detection.")},s.init_bubu=function(i){this.game_layer_action=i,this.node.angle=0,this.node.scale=new d(1,1,1),this.update_direction(b.RIGHT);var t=this.bubu_1_node.getComponent(_),e=N.get_cur_skin();e||(e=1),t.spriteFrame=v.instance.get_ui("bubu_"+e)},s.play_init_tween=function(i){if(y.get_game_state()!==P.START){m.stopAllByTarget(this.node);var t=this.node.position.x,e=this.node.position.y;this.node.setPosition(t-100,e,this.node.position.z),g(this.node).to(i,{position:new d(t,e,this.node.position.z)},{easing:"quadInOut"}).start()}},s.play_end_tween=function(i,t){this.graphics&&this.graphics.clear(),m.stopAllByTarget(this.node),g(this.node).to(2,{worldPosition:i,angle:this.node.angle-720,scale:new d(.1,.1,.1)},{easing:"quadInOut"}).call((function(){t()})).start()},s.start=function(){this.trailPoints=[],this.trailPoints.push({position:h().set(this.node.position),lifeTime:this.maxTrailTime})},s.update=function(i){if(y.get_game_state()===P.START){this.soundTimer-=i,this.soundTimer<=0&&(w.instance.play_shot_3("zi111"),this.soundTimer=this.soundInterval);var t=y.moveSpeed*i;this.node.getPosition(this._tempPos),this.direction===b.RIGHT_UP?this._tempNewPos.set(this._tempPos.x+t,this._tempPos.y+t,this._tempPos.z):this.direction===b.RIGHT_DOWN?this._tempNewPos.set(this._tempPos.x+t,this._tempPos.y-t,this._tempPos.z):this._tempNewPos.set(this._tempPos.x+t,this._tempPos.y,this._tempPos.z),this.node.setPosition(this._tempNewPos),this.sampleTrailPoint(this._tempNewPos),this.updateTrail(i),this.drawTrail(),y.main_ui_action.update_game_progress(this.node.worldPosition)}else y.get_game_state()!==P.END&&(this.updateTrail(i),this.drawTrail())},s.sampleTrailPoint=function(i){this.getTrailStartOffset(this.direction,this._tempTrailStartOffset);var t=h();if(d.add(t,i,this._tempTrailStartOffset),d.distance(t,this.lastSamplePosition)>=this.minDistanceForSample){var e={position:h().set(t),lifeTime:this.maxTrailTime};this.trailPoints.push(e),this.lastSamplePosition.set(t)}},s.updateTrail=function(i){this.trailPoints=this.trailPoints.filter((function(t){return t.lifeTime-=i,t.lifeTime>0}))},s.drawTrail=function(){if(!this.graphics||this.trailPoints.length<2)this.graphics&&this.graphics.clear();else{this.graphics.clear(),this.graphics.lineCap=c.LineCap.ROUND;for(var i=this.node.position,t=this.trailPoints.length-2;t>=0;t--){var e=this.trailPoints[t+1],o=this.trailPoints[t],n=e.lifeTime/this.maxTrailTime,s=o.lifeTime/this.maxTrailTime,a=Math.max(1,this.startWidth*((n+s)/2));this.graphics.lineWidth=a;var r=Math.floor(50+205*s);this.graphics.strokeColor=new f(255,255,255,r);var l=e.position.x-i.x,h=e.position.y-i.y,p=o.position.x-i.x,u=o.position.y-i.y;this.graphics.moveTo(l,h),this.graphics.lineTo(p,u),this.graphics.stroke()}}},s.getTrailStartOffset=function(i,t){var e=0,o=0,n=this.bulletHalfLength,s=1.41421356;i===b.RIGHT_UP?(e=-n/s,o=-n/s):i===b.RIGHT_DOWN?(e=-n/s,o=n/s):(e=-n,o=0),t.set(e,o,0)},s.update_direction=function(i){this.direction=i,this.bubu_1_node&&(this.bubu_1_node.angle=this.direction)},s.update_world_pos=function(i){this.node.setWorldPosition(i)},s.on_collider_begin=function(i,t,e){y.get_game_state()===P.START&&(3==t.tag?this.game_layer_action.game_win():this.game_layer_action.game_over())},s.on_collider_end=function(i,t,e){},s.onDestroy=function(){this.graphics&&this.graphics.clear(),this._collider_2D&&(this._collider_2D.off(u.BEGIN_CONTACT,this.on_collider_begin,this),this._collider_2D.off(u.END_CONTACT,this.on_collider_end,this))},t}(T)).prototype,"bubu_1_node",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(B.prototype,"rigid",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=t(B.prototype,"bulletHalfLength",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),E=t(B.prototype,"maxTrailTime",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),M=t(B.prototype,"minDistanceForSample",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),W=t(B.prototype,"startWidth",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),I=B))||I));s._RF.pop()}}}));

System.register("chunks:///_virtual/BytePlantform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./Global.ts","./Logger.ts"],(function(n){var t,i,e,o,s,l,a,r;return{setters:[function(n){t=n.inheritsLoose,i=n.createClass},function(n){e=n.cclegacy,o=n._decorator,s=n.Component},function(n){l=n.BYTEDANCE},function(n){a=n.Global},function(n){r=n.Logger}],execute:function(){var c,u;e._RF.push({},"747b9Tr6j1BloW9CypfSub7","BytePlantform",void 0);var h=o.ccclass;o.property,n("BytePlantform",h("BytePlantform")(((u=function(n){function e(){for(var t,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(t=n.call.apply(n,[this].concat(e))||this).tt=window.tt,t.banner=void 0,t.banner_show_status=!1,t}t(e,n);var o=e.prototype;return o.is_douyin=function(){return l},o.listen_douyin=function(n,t){if(this.is_douyin()){this.tt.onShow((function(i){r.log("onShow data  res:",i),"021036"===i.scene?null==n||n.call(t,!0):null==n||n.call(t,!1)}));var i=this.tt.getLaunchOptionsSync();i&&"021036"===i.scene&&(null==n||n.call(t,!0))}else null==n||n.call(t,!1)},o.check_side_bar=function(n,t){this.is_douyin()?this.tt.checkScene({scene:"sidebar",success:function(i){r.log("check scene success: ",i,i.isExist),null==n||n.call(t,i.isExist)},fail:function(i){r.log("check scene fail:",i,i),null==n||n.call(t,!1)}}):null==n||n.call(t,!1)},o.navigate_to_douyin=function(n,t){if(!this.is_douyin())return r.log("not douyin platform!"),void(null==n||n.call(t,!1));this.tt.navigateToScene({scene:"sidebar",success:function(){r.log("navigate success"),null==n||n.call(t,!0)},fail:function(i){r.log("navigate failed reason:",i),null==n||n.call(t,!1)}})},o.bytedance_setting=function(){r.log("BYTEDANCE_setting",l)},o.show_interstitial=function(n){void 0===n&&(n=0);var t=a.ad_intersitial_id;r.log("显示插屏广告》〉》〉》〉》〉》〉》〉》",t);var i=this.tt.createInterstitialAd({adUnitId:t.trim()});i&&(i.load().then((function(){i.show().then((function(){r.log("插屏广告展示成功")}))})).catch((function(n){r.log(n)})),setTimeout((function(){i.show().catch((function(n){r.log("插屏广告展示失败",n)}))}),1e3*n))},o.ShowAdvertisements=function(n){var t,i,e=a.ad_video_id;r.log("显示视频广告》〉》〉》〉》〉》〉》〉》",e);var o=this.tt.createRewardedVideoAd({adUnitId:e.trim()});o.onClose((function t(i){i.isEnded?(n(1),r.log("注销广告关闭监听1 "),o.offClose(t)):(r.log("注销广告关闭监听0 "),n(0))})),null==(t=o.show())||t.then((function(){r.log("视频广告展示")})),null==(i=o.onError())||i.then((function(){r.log("广告无法播放"),n(2)}))},o.hide_banner=function(){this.banner_show_status=!1,null!=this.banner&&(this.banner.destroy(),this.banner=null,r.log("关闭 banner..."))},o.show_banner=function(n){var t=this;if(null!=this.banner)return this.banner.destroy(),void(this.banner=null);this.banner_show_status=!0;var i=a.ad_banner_id,e=this.tt.getSystemInfoSync(),o=e.windowWidth,s=e.windowHeight;r.log("showBanner start ad_banner_id::",i.trim(),o,s);var l=this.tt.getSystemInfoSync(),c=l.windowWidth,u=l.windowHeight,h=this.tt.createBannerAd({adUnitId:i.trim(),style:{width:200,top:0}});h.style.left=(c-200)/2,h.onResize((function(n){r.log(n.width,n.height),h.style.top=u-n.height,h.style.left=(c-n.width)/2}));var d=this;h.onLoad((function(){r.log("banner 222 广告加载成功"),t.banner=h,t.banner_show_status?h.show().then((function(){r.log("广告显示成功"),setTimeout((function(){d.hide_banner(),r.log("广告隐藏")}),2e3)})).catch((function(n){r.log("广告组件出现问题",n)})):(r.log("错误出发，关闭bannner"),t.hide_banner())})),h.onError((function(n){r.log("banner 广告加载错误",n)}))},i(e,null,[{key:"ins",get:function(){return this._ins||(this._ins=new e),this._ins}}]),e}(s))._ins=void 0,c=u))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/CameraAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./Enums.ts","./Logger.ts"],(function(t){var e,i,r,n,o,a,s,l,c,u,p,f,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Node,l=t.Vec3,c=t.math,u=t.Component},function(t){p=t.Global},function(t){f=t.GAME_STATE},function(t){g=t.Logger}],execute:function(){var h,d,m,y,b,_,P,w,Y,D,v,A,z,W;o._RF.push({},"e27cdKVub5A7rdw8BT0Rr08","CameraAction",void 0);var C=a.ccclass,I=a.property;t("CameraAction",(h=C("CameraAction"),d=I(s),m=I({displayName:"X轴平滑系数 (X Damping)",tooltip:"控制 X 轴的跟随速度。值越小，跟随越平滑。",slide:!0,range:[.05,1,.01],step:.01}),y=I({displayName:"Y轴平滑系数 (Y Damping)",tooltip:"控制 Y 轴的跟随速度。值越小，跟随越平滑。",slide:!0,range:[.05,1,.01],step:.01}),b=I(l),_=I({displayName:"Y轴跟随范围 (Dead Zone)",tooltip:"角色 Y 轴超出此距离后，相机才开始跟随。"}),h(((W=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"target",Y,n(e)),r(e,"dampingX",D,n(e)),r(e,"dampingY",v,n(e)),r(e,"offset",A,n(e)),r(e,"followYDistance",z,n(e)),e._targetWorldPos=new l,e._currentPos=new l,e}i(e,t);var o=e.prototype;return o.onLoad=function(){e.Ins=this,this.target||g.warn("CameraAction: Target node is not set in Inspector.")},e.getIns=function(){return e.Ins},o.set_target=function(t){this.target=t},o.update=function(t){if(this.target&&p._game_state!=f.END){this.target.getWorldPosition(this._targetWorldPos),this.node.getWorldPosition(this._currentPos);var e=this._targetWorldPos.x+this.offset.x,i=this._targetWorldPos.y+this.offset.y;this._currentPos.x=c.lerp(this._currentPos.x,e,this.dampingX);var r=i-this._currentPos.y;if(Math.abs(r)>this.followYDistance){var n=i;n=r>0?i-this.followYDistance:i+this.followYDistance,this._currentPos.y=c.lerp(this._currentPos.y,n,this.dampingY)}this.node.setWorldPosition(this._currentPos)}},e}(u)).Ins=null,Y=e((w=W).prototype,"target",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(w.prototype,"dampingX",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),v=e(w.prototype,"dampingY",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),A=e(w.prototype,"offset",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(0,50,0)}}),z=e(w.prototype,"followYDistance",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),P=w))||P));o._RF.pop()}}}));

System.register("chunks:///_virtual/ChilunAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts"],(function(t){var i,e,o,n,r,a,c,l,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,c=t.Node,l=t.Component},function(t){u=t.Logger}],execute:function(){var s,h,p,_,d,g,f;r._RF.push({},"5e7b2N4bx9AJb2YBJ/kQPjy","ChilunAction",void 0);var y=a.ccclass,b=a.property;t("ChilunAction",(s=y("ChilunAction"),h=b({type:c}),p=b({tooltip:"齿轮旋转的速度（度/秒）。建议值：30 - 100"}),s((g=i((d=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,o(i,"chilun_sprite_node",g,n(i)),o(i,"rotationSpeed",f,n(i)),i._rotationDirection=1,i._targetNode=null,i}e(i,t);var r=i.prototype;return r.start=function(){this._targetNode=this.chilun_sprite_node,this._targetNode?(this._rotationDirection=Math.random()<.5?-1:1,this._targetNode.angle=360*Math.random(),u.log("齿轮初始化：方向为 "+(1===this._rotationDirection?"顺时针":"逆时针")+", 速度: "+this.rotationSpeed+" 度/秒")):u.error("【ChilunAction 错误】请确保 chilun_sprite_node 属性已赋值!")},r.update=function(t){if(this._targetNode){var i=this.rotationSpeed*t*this._rotationDirection;this._targetNode.angle+=i}},r.toggleDirection=function(){this._rotationDirection*=-1,u.log("齿轮方向已切换为 "+(1===this._rotationDirection?"顺时针":"逆时针"))},i}(l)).prototype,"chilun_sprite_node",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=i(d.prototype,"rotationSpeed",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),_=d))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/CoinManagerAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./Enums.ts","./EventsManager.ts","./Global.ts","./ResourcePool.ts","./Tools.ts","./XStorage.ts","./TipsAction.ts","./TipsManagerAction.ts"],(function(n){var t,o,i,e,a,c,r,s,l,u,_,p,f,g,h,d,y,b,v,w,A;return{setters:[function(n){t=n.applyDecoratedDescriptor,o=n.inheritsLoose,i=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){a=n.cclegacy,c=n._decorator,r=n.Label,s=n.Node,l=n.UIOpacity,u=n.Vec3,_=n.tween,p=n.Component},function(n){f=n.AudioManager},function(n){g=n.EventTyps},function(n){h=n.EventsManager},function(n){d=n.Global},function(n){y=n.ResourcePool},function(n){b=n.Tools},function(n){v=n.XStorage},function(n){w=n.TIPS_TYPE},function(n){A=n.TipsManagerAction}],execute:function(){var P,M,C,T,m,I,E;a._RF.push({},"b5469dxJBRCq4q7Lud8vXFF","CoinManagerAction",void 0);var L=c.ccclass,S=c.property;n("CoinManagerAction",(P=L("CoinManagerAction"),M=S(r),C=S(s),P((I=t((m=function(n){function t(){for(var t,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return t=n.call.apply(n,[this].concat(a))||this,i(t,"coin_label",I,e(t)),i(t,"coin_sprite",E,e(t)),t}o(t,n);var a=t.prototype;return a.onLoad=function(){h.Ins.addListener(g.UPDATE_COIN,this.update_coin,this)},a.start=function(){this.coin_label.string=v.get_cur_coins()+""},a.update_coin=function(){var n=this;if(""!=this.coin_label.string){var t=Number(this.coin_label.string),o=v.get_cur_coins()-t;o>0?A.show("获得"+o+"个⚡️",w.OK):A.show("消费"+o+"个⚡️",w.OK),o>0?(this.show_coin_add_tween(o),this.scheduleOnce((function(){n.coin_label.string=v.get_cur_coins()+""}),2.8)):this.coin_label.string=v.get_cur_coins()+""}else this.coin_label.string=v.get_cur_coins()+""},a.show_coin_add_tween=function(n){var t=this,o=d.ui_layer_action.node;f.instance.play_shot("coin_1"),y.instance.create_by_Pool("Coin",o.worldPosition,o).then((function(n){var o=n.getComponent(l);b.setSpriteAlpha(o,0),b.TweenAlphaAni(o,1,.5).call((function(){for(var n=1;n<3;n++)t.createMoney(new u(45*n,0,0),n),t.createMoney(new u(45*-n,0,0),n+1)})).delay(.3).call((function(){t.fly(n,0)})).start()}))},a.createMoney=function(n,t){var o=this,i=d.ui_layer_action.node;y.instance.create_by_Pool("Coin",i.worldPosition,i).then((function(i){var e=i.getComponent(l);b.setSpriteAlpha(e,1),_(i).to(.3,{position:n}).call((function(){o.fly(i,t)})).start()}))},a.fly=function(n,t){var o=this.coin_sprite.worldPosition.clone();o.y-=80,o.x+=50;var i=n.getComponent(l);_(n).delay(.2*t).to(.5,{worldPosition:o},{easing:"quadIn"}).to(.2,{worldPosition:this.coin_sprite.worldPosition},{easing:"quadIn"}).call((function(){_(i).to(.3,{opacity:0}).start(),f.instance.play_shot("coin_2")})).union().start()},t}(p)).prototype,"coin_label",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(m.prototype,"coin_sprite",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=m))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/ColliderAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Logger.ts"],(function(r){var i,e,t,o,n,l,a,s,h,c,p,u,d,f,g,y;return{setters:[function(r){i=r.applyDecoratedDescriptor,e=r.inheritsLoose,t=r.initializerDefineProperty,o=r.assertThisInitialized,n=r.createForOfIteratorHelperLoose},function(r){l=r.cclegacy,a=r._decorator,s=r.Color,h=r.Enum,c=r.v3,p=r.Graphics,u=r.UITransform,d=r.PolygonCollider2D,f=r.Vec2,g=r.Component},function(r){y=r.Logger}],execute:function(){var m,_,C,v,w,P,M,b,x,I,R,T,L,A,N,k,E,S;l._RF.push({},"2fdec8xcQdDGb1Vv6e5KfB7","ColliderAction",void 0);var z=a.ccclass,U=a.property,G=function(r){return r[r.CIRCLE=0]="CIRCLE",r[r.SQUARE=1]="SQUARE",r[r.TRIANGLE=2]="TRIANGLE",r}(G||{});r("ColliderAction",(m=z("ColliderAction"),_=U({type:[s],displayName:"多边形填充色范围"}),C=U({type:s}),v=U({type:[s],displayName:"斑点颜色范围"}),w=U({displayName:"斑点数量"}),P=U({type:h(G),displayName:"斑点形状"}),M=U({displayName:"斑点最小尺寸 (圆形为半径)"}),b=U({displayName:"斑点最大尺寸 (圆形为半径)"}),m((R=i((I=function(r){function i(){for(var i,e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];return i=r.call.apply(r,[this].concat(n))||this,t(i,"fillColors",R,o(i)),i._currentFillColor=new s(255,0,0,128),t(i,"strokeColor",T,o(i)),t(i,"lineWidth",L,o(i)),t(i,"spotColors",A,o(i)),t(i,"spotCount",N,o(i)),t(i,"spotShape",k,o(i)),t(i,"spotMinRadius",E,o(i)),t(i,"spotMaxRadius",S,o(i)),i.graphics=null,i.graphicsUITransform=null,i._tempWorldPos=c(),i._tempGraphicLocalPos=c(),i._tempCenterPoint=c(),i._collider_arr=[],i._current_collider_index=0,i}e(i,r);var l=i.prototype;return l.start=function(){},l.init_async=function(){var r=this;if(this.graphics=this.node.getComponent(p),this.graphicsUITransform=this.node.getComponent(u),!this.graphics||!this.graphicsUITransform)return y.error("【初始化错误】Graphics 或 UITransform 组件丢失，请检查节点设置!"),Promise.resolve();this.graphics.clear(),this._collider_arr.length=0,this._current_collider_index=0;var i=this.node.children;if(i.length>0)for(var e=0;e<i.length;e++){var t=i[e];if(t.active){if(0==t.children.length){var o=t.getComponents(d);this._collider_arr=this._collider_arr.concat(o)}}else y.log("this is is active false  when draw i",t)}for(var n=0;n<this._collider_arr.length;n++)this._collider_arr[n].sensor=!1,y.log("sensor>>>>",this._collider_arr[n].sensor);if(this.fillColors.length>0){var l=Math.floor(Math.random()*this.fillColors.length);this._currentFillColor=this.fillColors[l]}else this._currentFillColor=new s(150,150,150,180);return 0===this._collider_arr.length?Promise.resolve():new Promise((function(i){r.schedule(r.drawNextCollider.bind(r,i),0)}))},l.drawNextCollider=function(r){if(this._current_collider_index>=this._collider_arr.length)return this.unschedule(this.drawNextCollider),void r();var i=this._collider_arr[this._current_collider_index];this.drawCollider(i),this._current_collider_index++},l.drawCollider=function(r){if(this.graphics&&this.graphicsUITransform){for(var i,e=r.points,t=r.node,o=(this.graphics,[]),l=this._tempWorldPos,a=this._tempGraphicLocalPos,s=n(e);!(i=s()).done;){var h,c=i.value;l.set(c.x,c.y,0),null==(h=t.getComponent(u))||h.convertToWorldSpaceAR(l,l),this.graphicsUITransform.convertToNodeSpaceAR(l,a),o.push(new f(a.x,a.y))}this.fillPolygon(o),o.length>45&&this.drawRandomSpots(o),this.strokePolygon(o)}},l.definePolygonPath=function(r,i){if(!(i.length<3)){var e=i[0];r.moveTo(e.x,e.y);for(var t=1;t<i.length;t++)r.lineTo(i[t].x,i[t].y);r.close()}},l.fillPolygon=function(r){if(this.graphics&&!(r.length<3)){var i=this.graphics;this.definePolygonPath(i,r),i.fillColor=this._currentFillColor,i.fill()}},l.strokePolygon=function(r){if(this.graphics&&!(r.length<3)){var i=this.graphics;this.definePolygonPath(i,r),i.strokeColor=this.strokeColor,i.lineWidth=this.lineWidth,i.stroke()}},l.drawRandomSpots=function(r){if(this.graphics&&!(r.length<3)&&0!==this.spotColors.length){for(var i,e=this.graphics,t=this.spotColors.length,o=this._tempCenterPoint,l=1/0,a=1/0,s=-1/0,h=-1/0,c=n(r);!(i=c()).done;){var p=i.value;l=Math.min(l,p.x),a=Math.min(a,p.y),s=Math.max(s,p.x),h=Math.max(h,p.y)}for(var u=0;u<this.spotCount;u++){var d=l+Math.random()*(s-l),f=a+Math.random()*(h-a);o.set(d,f,0);var g=this.spotMinRadius+Math.random()*(this.spotMaxRadius-this.spotMinRadius),y=Math.floor(Math.random()*t);if(e.fillColor=this.spotColors[y],this.isPointInPolygon(o,r)){switch(this.spotShape){case G.CIRCLE:e.circle(d,f,g);break;case G.SQUARE:var m=g/2;e.rect(d-m,f-m,g,g);break;case G.TRIANGLE:var _=g,C=d+_*Math.cos(Math.PI/2),v=f+_*Math.sin(Math.PI/2),w=d+_*Math.cos(7*Math.PI/6),P=f+_*Math.sin(7*Math.PI/6),M=d+_*Math.cos(11*Math.PI/6),b=f+_*Math.sin(11*Math.PI/6);e.moveTo(C,v),e.lineTo(w,P),e.lineTo(M,b),e.close();break;default:e.circle(d,f,g)}e.fill()}}}},l.isPointInPolygon=function(r,i){for(var e=0,t=i.length,o=0;o<t;o++){var n=i[o],l=i[(o+1)%t];(n.y<=r.y&&l.y>r.y||l.y<=r.y&&n.y>r.y)&&r.x<(l.x-n.x)*(r.y-n.y)/(l.y-n.y)+n.x&&e++}return e%2==1},i}(g)).prototype,"fillColors",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[new s(70,130,180,180),new s(152,251,152,180),new s(255,222,173,180),new s(176,196,222,180),new s(216,191,216,180),new s(245,222,179,180),new s(240,128,128,180),new s(173,255,47,180)]}}),T=i(I.prototype,"strokeColor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s(255,255,255,255)}}),L=i(I.prototype,"lineWidth",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),A=i(I.prototype,"spotColors",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[new s(0,0,0,100),new s(255,255,255,80),new s(100,100,100,120)]}}),N=i(I.prototype,"spotCount",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),k=i(I.prototype,"spotShape",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return G.CIRCLE}}),E=i(I.prototype,"spotMinRadius",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),S=i(I.prototype,"spotMaxRadius",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),x=I))||x));l._RF.pop()}}}));

System.register("chunks:///_virtual/CountTimerAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./BaseWindows.ts","./AudioManager.ts","./Logger.ts"],(function(i){var t,e,n,r,o,l,s,a,u,c,p,h;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,n=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){o=i.cclegacy,l=i._decorator,s=i.Label,a=i.Sprite},function(i){u=i.GAME_STATE},function(i){c=i.BaseWindows},function(i){p=i.AudioManager},function(i){h=i.Logger}],execute:function(){var m,d,T,f,y,g,w,b,C;o._RF.push({},"88a84LprthDA75WR7ZuUy2e","CountTimerAction",void 0);var L=l.ccclass,A=l.property;i("CountTimerAction",(m=L("CountTimerAction"),d=A({type:s,tooltip:"显示倒计时时间的文本标签"}),T=A({type:a,tooltip:"饼状图（Sprite 组件 Type 需设置为 FILLED）"}),f=A({tooltip:"倒计时的总时长（秒）"}),m((w=t((g=function(i){function t(){for(var t,e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return t=i.call.apply(i,[this].concat(o))||this,n(t,"timerLabel",w,r(t)),n(t,"timerCircle",b,r(t)),n(t,"totalTime",C,r(t)),t.currentTime=0,t.isRunning=!1,t.timerCallback=null,t}e(t,i);var o=t.prototype;return o.show_windows=function(t,e){void 0===t&&(t=null),void 0===e&&(e=u.PAUSE),i.prototype.show_windows.call(this,t,e);var n=this;this.startCountdown(3,(function(){t&&(p.instance.play_shot("ding"),t()),n.close_windows(null)}))},o.close_windows=function(t){i.prototype.close_windows.call(this,t)},o.startCountdown=function(i,t){this.timerLabel&&this.timerCircle?(this.totalTime=i,this.currentTime=i,this.isRunning=!0,this.timerCallback=t,this.timerCircle.type===a.Type.FILLED&&this.timerCircle.fillType===a.FillType.RADIAL||h.warn("TimerCircle 的 Sprite Type 或 Fill Type 设置不正确，请确保为 FILLED/RADIAL。"),this.updateTimeDisplay(this.currentTime),this.timerCircle.fillRange=1,this.schedule(this.updateTimer,.05)):h.error("CountTimerAction: 缺少 Label 或 Sprite 引用！")},o.updateTimer=function(i){if(this.isRunning){if(this.currentTime-=i,this.currentTime<=0)return this.currentTime=0,this.isRunning=!1,this.unschedule(this.updateTimer),this.updateDisplay(0),void(this.timerCallback&&this.timerCallback());this.updateDisplay(this.currentTime)}},o.updateDisplay=function(i){var t=i/this.totalTime;this.timerCircle.fillRange=-1*t,this.updateTimeDisplay(i)},o.updateTimeDisplay=function(i){var t=Math.ceil(i);this.timerLabel.string=t.toString()},o.stopCountdown=function(){this.isRunning=!1,this.unschedule(this.updateTimer)},t}(c)).prototype,"timerLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(g.prototype,"timerCircle",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(g.prototype,"totalTime",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),y=g))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/CustomVirtualList.ts",["cc"],(function(){var t;return{setters:[function(u){t=u.cclegacy}],execute:function(){t._RF.push({},"e62fdodLSZBU6/Z2j2EP06J","CustomVirtualList",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/Enums.ts",["cc"],(function(_){var E,R,S,A,t,T;return{setters:[function(_){E=_.cclegacy,R=_.JsonAsset,S=_.Prefab,A=_.AudioClip,t=_.SpriteFrame,T=_.SpriteAtlas}],execute:function(){E._RF.push({},"f43d4/gNitFz7Mm/9s7NRfs","Enums",void 0);_("EventTyps",{UPDATE_DIRECTION:"UPDATE_DIRECTION",LOAD_ASSETS_OVER:"LOAD_ASSETS_OVER",ROLL_UPDATE_SCORE:"ROLL_UPDATE_SCORE",UPDATE_COIN:"UPDATE_COIN",SYN_COIN:"SYN_COIN",SHOW_FLY_SCORE_by_index:"SHOW_FLY_SCORE_by_index",SHOW_FLY_SCORE_by_score:"SHOW_FLY_SCORE_by_score",SHOW_SCORE_EFFECTS:"SHOW_SCORE_EFFECTS",RESTART_GAME:"RESTART_GAME",RERUSH_SHOW_GG:"RERUSH_SHOW_GG",START_LVL:"START_LVL",READY_START_GAME:"READY_START_GAME",UPDATE_BUBU_SKIN:"UPDATE_BUBU_SKIN",CLEAR_GAME_LAYER:"clear_game_layer",UPGRADE_LVL:"UPGRADE_LVL",DOUYIN_SILDER_show_gift_btn:"DOUYIN_SILDER_show_gift_btn",DOUYIN_SILDER_show_refrush_data:"DOUYIN_SILDER_refrush_data"}),_("DIR",function(_){return _[_.RIGHT=0]="RIGHT",_[_.RIGHT_UP=45]="RIGHT_UP",_[_.RIGHT_DOWN=-45]="RIGHT_DOWN",_}({})),_("GAME_STATE",function(_){return _[_.READY=0]="READY",_[_.START=1]="START",_[_.END=2]="END",_[_.PAUSE=3]="PAUSE",_}({})),_("AssetType",{Json:{type:R,path:"jsons/"},Prefab:{type:S,path:"prefabs/"},Sound:{type:A,path:"sounds/"},Ui:{type:t,path:"ui/"},Atlas:{type:T,path:"atlas/"}});E._RF.pop()}}}));

System.register("chunks:///_virtual/EventsManager.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){var e;n._RF.push({},"02f4ay82JhL25vC6G9ttu9u","EventsManager",void 0);var r=t("EventsManager",function(){function t(){this.dict={}}var n=t.prototype;return n.addListener=function(t,n,e){var r=this.dict[t];null==r&&(r=new Array,this.dict[t]=r);for(var i=0,a=r.length;i<a;i++)if(r[i][0]==n&&r[i][1]==e)return;r.push([n,e])},n.removeListener=function(t,n,e){var r=this.dict[t];if(null!=r){for(var i=0,a=r.length;i<a;i++)if(r[i][0]==n&&r[i][1]==e){r.splice(i,1);break}0==r.length&&(this.dict[t]=null,delete this.dict[t])}},n.dispatch=function(t){if(null!=this.dict[t]){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];this.dealMsg(t,void 0,e)}},n.dealMsg=function(t,n){for(var e,r=this.dict[t],i=0,a=r.length,c=null,s=arguments.length,l=new Array(s>2?s-2:0),u=2;u<s;u++)l[u-2]=arguments[u];for(;i<a;){var h;if(c=r[i],!n||n&&n==c[1])e=(h=c[0]).apply.apply(h,[c[1]].concat(l));r.length!=a&&(a=r.length,i--),i++}return e},t}());e=r,r.Ins=new e,n._RF.pop()}}}));

System.register("chunks:///_virtual/GameLayerAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./EventsManager.ts","./ResourcePool.ts","./LvlAction.ts","./CameraAction.ts","./BubuAction.ts","./Global.ts","./XStorage.ts","./AudioManager.ts","./Logger.ts"],(function(t){var e,n,r,a,i,o,c,u,s,_,l,h,f,d,p,v,g,b;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){a=t.cclegacy,i=t._decorator,o=t.Component},function(t){c=t.EventTyps,u=t.GAME_STATE,s=t.DIR},function(t){_=t.EventsManager},function(t){l=t.ResourcePool},function(t){h=t.LvlAction},function(t){f=t.CameraAction},function(t){d=t.BubuAction},function(t){p=t.Global},function(t){v=t.XStorage},function(t){g=t.AudioManager},function(t){b=t.Logger}],execute:function(){var m;a._RF.push({},"96cefhZbF9Iyq2fWpWsHigG","GameLayerAction",void 0);var w=i.ccclass;t("GameLayerAction",w("GameLayerAction")(m=function(t){function a(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this)._cur_lvl_action=void 0,e.cur_bubu=void 0,e}e(a,t);var i=a.prototype;return i.onLoad=function(){p.game_layer_action=this,_.Ins.addListener(c.START_LVL,this.start_lvl,this),_.Ins.addListener(c.READY_START_GAME,this.ready_start_game,this),_.Ins.addListener(c.CLEAR_GAME_LAYER,this.clear_game_layer,this)},i.clear_game_layer=function(){var t=n(r().mark((function t(){var e,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this.cur_bubu&&l.instance.remove_node(this.cur_bubu.node),e=this.node.children,n=0;n<e.length;n++)l.instance.remove_node(e[n]);this.node.removeAllChildren(),b.log("清理游戏场景  ");case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.start_lvl=function(){var t=n(r().mark((function t(e){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b.log("bubu speed>>>",p.moveSpeed),n=Date.now(),this.clear_game_layer(),t.prev=3,t.next=6,this.create_lvl_data(e);case 6:t.sent,t.next=16;break;case 9:return t.prev=9,t.t0=t.catch(3),b.error("在 start_lvl 中捕获到错误: 无法创建关卡数据",t.t0),e=2,t.next=15,this.create_lvl_data(e);case 15:t.sent;case 16:return t.next=18,this.create_role(this._cur_lvl_action.original.getWorldPosition());case 18:b.log("创建关卡和角色总耗时:",Date.now()-n,"hao秒"),this.cur_bubu.play_init_tween(2.5),v.record_cur_lvl(e),this.ready_start_game();case 22:case"end":return t.stop()}}),t,this,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),i.create_lvl_data=function(){var t=n(r().mark((function t(e){var a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=this,t.abrupt("return",new Promise((function(t,i){l.instance.create_by_Pool("Lvl_"+e,a.node.getWorldPosition(),a.node).then(n(r().mark((function n(i){var o;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(o=i.getComponent(h))){n.next=4;break}return n.next=4,o.init_lvl_async(e);case 4:a._cur_lvl_action=o,p.main_ui_action.update_original_target_world_pos(o.original.worldPosition,o.target.worldPosition),t(o);case 7:case"end":return n.stop()}}),n)})))).catch((function(t){i(t)}))})));case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.create_role=function(){var t=n(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f.getIns().set_target(null),this.cur_bubu&&l.instance.remove_node(this.cur_bubu.node),t.next=4,this.new_bubu(e);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.new_bubu=function(){var t=n(r().mark((function t(e){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,t.abrupt("return",new Promise((function(t,r){l.instance.create_by_Pool("Bubu",e,n.node).then((function(e){var r=e.getComponent(d);r&&r.init_bubu(n),n.cur_bubu=r,f.getIns().set_target(e),t(r)})).catch((function(t){b.log(t),r(t)}))})));case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),i.event_update_direction=function(t){this.cur_bubu&&this.cur_bubu.update_direction(t)},i.game_over=function(){g.instance.play_shot_3("peng"),p.set_game_state(u.PAUSE),p.ui_layer_action.show_win("Lose",null,!1)},i.game_win=function(){p.level_coin_map.has(this._cur_lvl_action.cur_lvl+1)&&v.record_cur_lvl(this._cur_lvl_action.cur_lvl+1);var t=p.main_ui_action.distanceTraveled_M;v.record_score(v.get_cur_score()+t),p.set_game_state(u.END),this.cur_bubu.play_end_tween(this._cur_lvl_action.get_target_particele_world_pos(),(function(){p.ui_layer_action.show_win("Win",(function(){b.log("~~~~~ 显示下一关")}),!1,u.END)}))},i.relife_game=function(t){this.cur_bubu.update_world_pos(t),this.event_update_direction(s.RIGHT),p.main_ui_action.update_game_progress(this.cur_bubu.node.worldPosition),this.cur_bubu.play_init_tween(2.5),this.ready_start_game()},i.ready_start_game=function(){p.ui_layer_action.show_win("Count",(function(){b.log("~~~~~ 倒计时结束，start game！"),p.set_game_state(u.START,"Main")}),!1)},i.waitTime=function(t){var e=this;return new Promise((function(n,r){e.scheduleOnce((function(){n(!0)}),t)}))},a}(o))||m);a._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcePool.ts","./Global.ts","./Enums.ts","./EventsManager.ts","./XStorage.ts"],(function(e){var n,t,a,i,o,r,s,c,l,u,p,f,_,g,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Prefab,c=e.PhysicsSystem2D,l=e.Component},function(e){u=e.ResourcePool},function(e){p=e.Global},function(e){f=e.GAME_STATE,_=e.EventTyps},function(e){g=e.EventsManager},function(e){d=e.XStorage}],execute:function(){var y,m,h,b,v;o._RF.push({},"573baAOiC5FurwMlm7dS36I","GameManager",void 0);var M=r.ccclass,w=r.property;e("GameManager",(y=M("GameManager"),m=w(s),y((v=n((b=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return(n=e.call.apply(e,[this].concat(o))||this).direction=-1,a(n,"loading_prefab",v,i(n)),n}t(n,e);var o=n.prototype;return o.onLoad=function(){},o.start=function(){c.instance.fixedTimeStep=1/30,p.set_game_state(f.READY,"Main");var e=this;u.instance.set_prefab("Loading",this.loading_prefab),p.ui_layer_action.show_win("Loading",(function(){p.init_once(),e.start_game()}),!1)},o.update=function(e){},o.start_game=function(){d.is_new_player()?(g.Ins.dispatch(_.START_LVL,1),p.set_old_player()):p.ui_layer_action.show_win("Home",null,!1)},n}(l)).prototype,"loading_prefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=b))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/Global.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./XStorage.ts","./ResourcePool.ts","./Logger.ts","./LvlAction.ts"],(function(e){var t,a,o,n,_,i,r,s,l,c,d;return{setters:[function(e){t=e.createClass,a=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,n=e._decorator,_=e.instantiate,i=e.Vec3},function(e){r=e.GAME_STATE},function(e){s=e.XStorage},function(e){l=e.ResourcePool},function(e){c=e.Logger},function(e){d=e.LvlAction}],execute:function(){var u,g;o._RF.push({},"044d17e2pBH87JlclEC1tow","Global",void 0);var p=n.ccclass;n.property,e("Global",p("Global")(((g=function(){function e(){}return e.init_once=function(){e.is_new_player=s.is_new_player(),e.is_new_player&&s.record_skin_arr([1],1);for(var t=1;t<=100;t++){var o=l.instance.get_prefab("Lvl_"+t);if(o){e.level_arr.push(t);var n=_(o),r=n.getComponent(d),u=i.distance(r.original.worldPosition,r.target.worldPosition)/100;e.level_coin_map.set(t,Math.ceil(u)),n.destroy()}}c.log(">>>>>>>loaded_once>>",e.level_coin_map);for(var g,p=s.get_lvl_progress(),v=a(e.level_coin_map.keys());!(g=v()).done;){var f=g.value;p.has(f)||p.set(f,0)}s.record_lvl_progress(p)},e.loaded_once=function(){},e.set_old_player=function(){s.is_old_player(),e.is_new_player=s.is_new_player()},e.set_game_state=function(t,a){void 0===a&&(a="default"),e.game_stat=t,c.log("set game state,",e.get_state_info_msg()," actions:",a)},e.get_state_info_msg=function(){return e._game_state==r.READY?"READY":e._game_state==r.START?"START":e._game_state==r.END?"END":e._game_state==r.PAUSE?"PAUSE":"--"},e.get_game_state=function(){return e.game_stat},t(e,null,[{key:"_game_state",get:function(){return e.game_stat}}]),e}()).loading_rate=0,g.game_stat=r.READY,g.ui_layer_action=void 0,g.game_layer_action=void 0,g.main_ui_action=void 0,g.gift_coins=500,g.skin_cost=1800,g.MAX_LOTTERY_COUNT=4,g.MAX_FAIL_COUNT=10,g.open_sound=!0,g.is_new_player=!1,g.is_review_model=!0,g.ad_intersitial_id="87id2mda2341j1k0hf",g.ad_video_id="enadld6d5on178w3hk",g.ad_banner_id="501h7hn4sms6cgioo3",g.ad_custom_id=["adunit-e6abac8a0128370d","adunit-110bc5554e13dbe2"],g.level_arr=[],g.level_coin_map=new Map,g.moveSpeed=450,u=g))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/HomeAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseWindows.ts","./Enums.ts","./AudioManager.ts","./LevelItem.ts","./Global.ts","./XStorage.ts","./ResourcePool.ts","./Logger.ts","./EventsManager.ts","./ResourceManger.ts"],(function(e){var t,n,i,l,o,r,s,c,a,u,_,h,v,f,p,g,d,w,m,y,b,S,L,I,V,T,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized,o=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,a=e.ScrollView,u=e.Node,_=e.Sprite,h=e.Layout,v=e.UITransform,f=e.v2,p=e.Tween,g=e.Vec3},function(e){d=e.BaseWindows},function(e){w=e.EventTyps,m=e.GAME_STATE},function(e){y=e.AudioManager},function(e){b=e.LevelItem},function(e){S=e.Global},function(e){L=e.XStorage},function(e){I=e.ResourcePool},function(e){V=e.Logger},function(e){T=e.EventsManager},function(e){k=e.default}],execute:function(){var E,A,C,R,H,O,P,B,G;s._RF.push({},"8658fX8/jtFqLoliBugyj7B","HomeAction",void 0);var M=c.ccclass,U=c.property;e("HomeAction",(E=M("HomeAction"),A=U(a),C=U(u),R=U(_),E((P=t((O=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"levelScrollView",P,l(t)),i(t,"gg_node",B,l(t)),i(t,"bubu_sprite",G,l(t)),t.scroll_time=1,t.allItems=[],t._inited=!1,t}n(t,e);var s=t.prototype;return s.onLoad=function(){T.Ins.addListener(w.RERUSH_SHOW_GG,this.rerush_gg,this),T.Ins.addListener(w.UPDATE_BUBU_SKIN,this.update_bubu_skin,this)},s.show_windows=function(t,n){void 0===t&&(t=null),void 0===n&&(n=m.PAUSE),e.prototype.show_windows.call(this,t,n),this.show_cxt_classic(),this.update_bubu_skin()},s.close_windows=function(t){e.prototype.close_windows.call(this,t)},s.init=function(){var e=this;this.initLevelList().then((function(){e.scheduleOnce((function(){var t;null==(t=e.levelScrollView.content)||null==(t=t.getComponent(h))||t.updateLayout(),e.scrollToCurrentLevel(L.get_cur_lvl())}),.1)})).catch((function(e){V.error("初始化列表失败:",e)})),this._inited=!0,T.Ins.dispatch(w.RERUSH_SHOW_GG)},s.clear_list=function(){var e;if(this.levelScrollView&&this.levelScrollView.content){var t=this.levelScrollView.content;[].concat(t.children).forEach((function(e){I.instance.remove_node(e)})),this.allItems=[],null==(e=t.getComponent(h))||e.updateLayout()}else V.warn("ScrollView 或 Content 未准备好。")},s.initLevelList=function(){var e=o(r().mark((function e(){var t,n,i,l,o,s,c,a,u,_,h,v,f,p,d,w;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.levelScrollView&&this.levelScrollView.content){e.next=3;break}return V.error("ScrollView 或 Content 未准备好，无法初始化列表。"),e.abrupt("return");case 3:for(this.clear_list(),t=this.levelScrollView.content,L.get_cur_lvl(),n=L.get_history_lvl(),i=[],l=[],o=0;o<S.level_arr.length;o++)s=S.level_arr[o],c=s>n,l.push({lvl:s,isLocked:c}),i.push(I.instance.create_by_Pool("LevelItem",g.ZERO,t,!1));for(a=[S.level_arr[S.level_arr.length-1]+1,S.level_arr[S.level_arr.length-1]+2],u=0,_=a;u<_.length;u++)h=_[u],l.push({lvl:h,isLocked:!0}),i.push(I.instance.create_by_Pool("LevelItem",g.ZERO,t,!1));return e.next=14,Promise.all(i);case 14:for(v=e.sent,this.allItems=[],f=0;f<v.length;f++)p=v[f],d=l[f],t.addChild(p),(w=p.getComponent(b))&&(w.init(d.lvl,this),this.allItems.push(w));this.update_ui();case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.scrollToCurrentLevel=function(e){for(var t=this.allItems[e-1],n=0;n<this.allItems.length;n++)if(this.allItems[n].level==e){t=this.allItems[n];break}if(t&&this.levelScrollView){var i=this.levelScrollView.content,l=this.levelScrollView.node,o=i.getComponent(v),r=l.getComponent(v),s=o.height,c=r.height,a=t.node;if(!(s<=c)){var u=a.position.y,_=f(0,-u-c/2);this.levelScrollView.scrollToOffset(_,this.scroll_time)}}},s.show_cxt_classic=function(){this._inited||this.init();var e=this;p.stopAllByTarget(this.node),e.scheduleOnce((function(){e.update_ui()}),.1)},s.update_ui=function(){var e,t=L.get_cur_lvl(),n=L.get_history_lvl(),i=L.get_lvl_progress();this.allItems.forEach((function(e){e.update_ui(t,n,i)})),null==(e=this.levelScrollView.content.getComponent(h))||e.updateLayout(),this.scrollToCurrentLevel(t)},s.rerush_gg=function(){if(this.gg_node){var e=L.get_today_lottery_count(),t=S.MAX_LOTTERY_COUNT-e;this.gg_node.active=t>0}},s.update_bubu_skin=function(){var e=L.get_cur_skin();this.bubu_sprite.spriteFrame=k.instance.get_ui("bubu_"+e)},s.on_click_home=function(){y.instance.play_shot("btn_1")},s.on_click_skin=function(){S.ui_layer_action.show_win("Skin",null,!0)},s.on_click_lottery=function(){S.ui_layer_action.show_win("Lottery")},t}(d)).prototype,"levelScrollView",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(O.prototype,"gg_node",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=t(O.prototype,"bubu_sprite",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=O))||H));s._RF.pop()}}}));

System.register("chunks:///_virtual/HomeCxtClassicAction.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"92ad52tk/lOgbiIMXoNJ4DE","HomeCxtClassicAction",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/HomeCxtHomeAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventsManager.ts","./Enums.ts","./XStorage.ts","./AudioManager.ts","./Logger.ts"],(function(t){var o,n,e,s,i,c,a,u,r,l,h,_,p;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,s=t.Vec3,i=t.Tween,c=t.v3,a=t.tween,u=t.Component},function(t){r=t.EventsManager},function(t){l=t.EventTyps},function(t){h=t.XStorage},function(t){_=t.AudioManager},function(t){p=t.Logger}],execute:function(){var f;n._RF.push({},"71cc3rsP79Izbk5QkALgZpF","HomeCxtHomeAction",void 0);var d=e.ccclass;e.property,t("HomeCxtHomeAction",d("HomeCxtHomeAction")(f=function(t){function n(){for(var o,n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return(o=t.call.apply(t,[this].concat(e))||this).home_action=null,o.defalut_pos=c(0,0,0),o}o(n,t);var e=n.prototype;return e.onLoad=function(){this.defalut_pos=new s(this.node.position)},e.start=function(){},e.update=function(t){},e.show_cxt_home=function(t){this.node.active=!0,this.home_action=t,p.log("HomeCxtHomeAction  显示主界面",this.defalut_pos),i.stopAllByTarget(this.node),this.node.setPosition(c(720,this.defalut_pos.y,0)),a(this.node).to(.2,{position:this.defalut_pos},{easing:"quadInOut"}).start()},e.close_cxt_home=function(){var t=this;i.stopAllByTarget(this.node),a(this.node).to(.2,{position:new s(-720,this.defalut_pos.y,0)},{easing:"quadInOut"}).call((function(){t.node.active=!1})).start()},e.on_click_classic=function(){p.log("切换到经典关卡界面"),_.instance.play_shot("btn_1"),this.home_action.show_cxt_classic()},e.on_click_start_game=function(){p.log("开始游戏"),_.instance.play_shot("btn_1"),this.home_action.close_windows(null);var t=h.get_cur_lvl();r.Ins.dispatch(l.START_LVL,t)},n}(u))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/LevelItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcePool.ts","./ColliderAction.ts","./EventsManager.ts","./Enums.ts","./Logger.ts","./Global.ts","./XStorage.ts","./TipsManagerAction.ts","./AdManger.ts","./TipsAction.ts"],(function(e){var t,i,o,l,n,r,a,s,c,h,u,f,_,g,v,d,p,b,m,y,w,L,T,k,C,I,x;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,l=e.assertThisInitialized,n=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,c=e.Label,h=e.Color,u=e.Graphics,f=e.UITransform,_=e.instantiate,g=e.PolygonCollider2D,v=e.v3,d=e.Vec2,p=e.Component},function(e){b=e.ResourcePool},function(e){m=e.ColliderAction},function(e){y=e.EventsManager},function(e){w=e.EventTyps},function(e){L=e.Logger},function(e){T=e.Global},function(e){k=e.XStorage},function(e){C=e.TipsManagerAction},function(e){I=e.AdManger},function(e){x=e.TIPS_TYPE}],execute:function(){var A,P,z,R,S,U,N,M,E,F,X,D,W,Y,O,B,G,H,V,j,Q,q,J,K,Z,$;r._RF.push({},"323a9l1xg1ID7Dh4PQ1cn5A","LevelItem",void 0);var ee=a.ccclass,te=a.property;e("LevelItem",(A=ee("LevelItem"),P=te(s),z=te(c),R=te(s),S=te({type:s,tooltip:"展示视频广告标识"}),U=te({type:h}),N=te({type:h}),M=te({type:h}),E=te({type:h}),F=te(s),X=te(c),D=te(c),A((O=t((Y=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return t=e.call.apply(e,[this].concat(n))||this,o(t,"previewNode",O,l(t)),o(t,"levelLabel",B,l(t)),t.level=0,o(t,"lock_node",G,l(t)),o(t,"ad_video_node",H,l(t)),t.DEFAULT_FILL_COLOR=new h(255,0,0,128),o(t,"current_lvl_fill_color",V,l(t)),o(t,"unlocked_lvl_fill_color",j,l(t)),o(t,"fillColor",Q,l(t)),o(t,"strokeColor",q,l(t)),o(t,"lineWidth",J,l(t)),t.graphics=null,t.targetUITransform=null,t.is_locked=!1,t.home_action=null,o(t,"coin_layout",K,l(t)),o(t,"coin_label_progress",Z,l(t)),o(t,"coin_label_total",$,l(t)),t}i(t,e);var r=t.prototype;return r.init=function(e,t){var i,o,l,n;if((this.level=e,this.home_action=t,!this.graphics||!this.targetUITransform)&&(this.graphics=null!=(i=null==(o=this.previewNode)?void 0:o.getComponent(u))?i:null,this.targetUITransform=null!=(l=null==(n=this.previewNode)?void 0:n.getComponent(f))?l:null,!this.graphics||!this.targetUITransform))return void L.error("【LevelItem初始化错误】目标节点或组件丢失!");this.levelLabel&&(this.levelLabel.string=""+e),this.coin_label_progress&&(this.coin_label_progress.string="0");var r=T.level_coin_map.get(this.level);this.coin_label_total&&(this.coin_label_total.string=void 0!==r?String(r):"0"),this.coin_layout&&(this.coin_layout.active=void 0!==r)},r.update_ui=function(e,t,i){if(this.is_locked=this.level>t,this.graphics&&this.graphics.clear(),this.is_locked?this.lock_node&&(this.lock_node.active=!0):(this.lock_node&&(this.lock_node.active=!1),this.fillColor=e==this.level?this.current_lvl_fill_color:this.unlocked_lvl_fill_color,this.draw_single_line(this.level)),this.ad_video_node&&(this.ad_video_node.active=!this.is_locked&&k.is_show_fail_count_flag(this.level)),this.coin_label_progress){var o=i.get(this.level);this.coin_label_progress.string=void 0!==o?String(o):"0"}},r.reset=function(){this.level=0,this.fillColor=this.DEFAULT_FILL_COLOR,this.levelLabel&&(this.levelLabel.string=""),this.graphics&&this.graphics.clear(),this.lock_node&&(this.lock_node.active=!1),this.ad_video_node&&(this.ad_video_node.active=!1),this.coin_layout&&(this.coin_layout.active=!1)},r.draw_single_line=function(e){if(this.targetUITransform){var t=b.instance.get_prefab("Lvl_"+e);if(t){var i=_(t),o=[];if(i.children.forEach((function(e){e.getComponent(m)&&e.children.forEach((function(e){e.getComponents(g).forEach((function(e){o.push({points:e.points,colliderNode:e.node})}))}))})),0!==o.length){for(var l=this.calculateGlobalBoundingBox(o),n=this.targetUITransform.width,r=this.targetUITransform.height,a=this.calculateScaleAndOffset(l,n,r),s=a.scaleFactor,c=a.offsetX,h=a.offsetY,u=0,f=o;u<f.length;u++){var v=f[u];this.drawCollider(v.points,v.colliderNode,s,c,h)}i.destroy()}else i.destroy()}else L.error("没有找到预制体 Lvl_"+e)}},r.calculateGlobalBoundingBox=function(e){for(var t,i=1/0,o=1/0,l=-1/0,r=-1/0,a=v(),s=n(e);!(t=s()).done;){var c=t.value,h=c.colliderNode.getComponent(f);if(h)for(var u,_=n(c.points);!(u=_()).done;){var g=u.value;h.convertToWorldSpaceAR(v(g.x,g.y,0),a),i=Math.min(i,a.x),o=Math.min(o,a.y),l=Math.max(l,a.x),r=Math.max(r,a.y)}}return{minX:i,minY:o,maxX:l,maxY:r,width:l-i,height:r-o}},r.calculateScaleAndOffset=function(e,t,i){var o=i-0;if(e.width<=0||e.height<=0||o<=0)return{scaleFactor:1,offsetX:0,offsetY:0};var l=o/e.height,n=(e.minX+e.maxX)/2,r=(e.minY+e.maxY)/2,a=v();this.targetUITransform.convertToNodeSpaceAR(v(n,r,0),a);return{scaleFactor:l,offsetX:0-a.x*l,offsetY:0-a.y*l}},r.drawCollider=function(e,t,i,o,l){if(this.graphics&&this.targetUITransform){this.graphics;var r=[],a=t.getComponent(f);if(a){for(var s,c=n(e);!(s=c()).done;){var h=s.value,u=v(h.x,h.y,0);a.convertToWorldSpaceAR(u,u);var _=v();this.targetUITransform.convertToNodeSpaceAR(u,_),_.x*=i,_.y*=i,_.x+=o,_.y+=l,r.push(new d(_.x,_.y))}this.fillPolygon(r),this.strokePolygon(r)}}},r.definePolygonPath=function(e,t){if(!(t.length<3)){var i=t[0];e.moveTo(i.x,i.y);for(var o=1;o<t.length;o++)e.lineTo(t[o].x,t[o].y);e.close()}},r.fillPolygon=function(e){if(this.graphics&&!(e.length<3)){var t=this.graphics;this.definePolygonPath(t,e),t.fillColor=this.fillColor,t.fill()}},r.strokePolygon=function(e){if(this.graphics&&!(e.length<3)){var t=this.graphics;this.definePolygonPath(t,e),t.strokeColor=this.strokeColor,t.lineWidth=this.lineWidth,t.stroke()}},r._start_this_game=function(){var e;null==(e=this.home_action)||e.close_windows(null),y.Ins.dispatch(w.START_LVL,this.level)},r.on_click_start_btn=function(){var e=this;if(L.log("click start btn at level ",this.level),this.level>k.get_history_lvl()){var t=this.level-1;C.show("需要通过第"+t+"关",x.WARN)}else{var i=this.level;k.is_show_fail_count_flag(i)?I.show_video((function(t){1===t?(L.log("视频广告播放成功，重置失败次数"),k.reset_fail_count(i),e._start_this_game()):C.show("视频播放失败，无法继续游戏",x.WARN)})):this._start_this_game()}},t}(p)).prototype,"previewNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(Y.prototype,"levelLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(Y.prototype,"lock_node",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(Y.prototype,"ad_video_node",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(Y.prototype,"current_lvl_fill_color",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(255,221,21,125)}}),j=t(Y.prototype,"unlocked_lvl_fill_color",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(29,160,50,125)}}),Q=t(Y.prototype,"fillColor",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(255,0,0,128)}}),q=t(Y.prototype,"strokeColor",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h(255,255,255,255)}}),J=t(Y.prototype,"lineWidth",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),K=t(Y.prototype,"coin_layout",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(Y.prototype,"coin_label_progress",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(Y.prototype,"coin_label_total",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=Y))||W));r._RF.pop()}}}));

System.register("chunks:///_virtual/LimitedCollect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TipsManagerAction.ts","./TipsAction.ts","./XStorage.ts","./Logger.ts"],(function(t){var e,i,o,n,a,s,l,r,c,u,h,d,p,m,g,f,C,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,l=t.Label,r=t.Button,c=t.Node,u=t.tween,h=t.Vec3,d=t.Animation,p=t.isValid,m=t.Component},function(t){g=t.TipsManagerAction},function(t){f=t.TIPS_TYPE},function(t){C=t.XStorage},function(t){_=t.Logger}],execute:function(){var L,y,S,T,v,I,D,w,b;a._RF.push({},"3799ed5yJNAErQuqnUYmZLn","LimitedCollect",void 0);var A=s.ccclass,B=s.property,E=6e5,U="LAST_COLLECT_DATE",M="DAILY_COLLECT_COUNT",N="LAST_COLLECT_TIME",R="USER_DIAMONDS";t("LimitedCollect",(L=A("LimitedCollect"),y=B(l),S=B(r),T=B(c),L((D=e((I=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,o(e,"statusLabel",D,n(e)),o(e,"collectButton",w,n(e)),o(e,"dou_2_animation_node",b,n(e)),e.userDiamonds=0,e.dailyCount=0,e.lastCollectTime=0,e}i(e,t);var a=e.prototype;return a.onLoad=function(){this.collectButton&&this.collectButton.node.on(r.EventType.CLICK,this.onCollectButtonClick,this)},a.start=function(){var t=this;this.node.active=!0,this.loadLocalData(),this.checkAndResetDailyData(),this.startUpdateLoop(),this.show_this_();var e=this;this.node.active&&this.scheduleOnce((function(){e.node.active&&u(t.node).to(.15,{scale:new h(2,2,2)}).to(.15,{scale:new h(1,1,1)}).call((function(){})).start()}),5)},a.onDestroy=function(){this.unschedule(this.updateUI)},a.padZero=function(t){return("0"+String(t)).slice(-2)},a.getFormattedDate=function(t){var e=t.getFullYear(),i=t.getMonth()+1,o=t.getDate();return e+"-"+this.padZero(i)+"-"+this.padZero(o)},a.loadLocalData=function(){this.userDiamonds=parseInt(localStorage.getItem(R)||"0"),this.dailyCount=parseInt(localStorage.getItem(M)||"0"),this.lastCollectTime=parseInt(localStorage.getItem(N)||"0"),0===this.lastCollectTime&&this.dailyCount>0&&(this.lastCollectTime=1)},a.checkAndResetDailyData=function(){var t=this.getFormattedDate(new Date);localStorage.getItem(U)!==t&&(this.dailyCount=0,this.lastCollectTime=0,localStorage.setItem(M,"0"),localStorage.setItem(N,"0"),localStorage.setItem(U,t),_.log("已跨天，每日领取次数重置。"))},a.startUpdateLoop=function(){this.schedule(this.updateUI,1),this.updateUI()},a.updateUI=function(){if(this.dailyCount>=6)this.setButtonState(!1,"领取");else{if(this.lastCollectTime>0){var t=Date.now()-this.lastCollectTime,e=E-t;if(e>1e3){var i=Math.ceil(e/1e3),o=Math.floor(i/60),n=i%60,a=this.padZero(o),s=this.padZero(n);return void this.setButtonState(!1,a+":"+s)}}if(this.setButtonState(!0,"领取"),this.dou_2_animation_node){var l=this.dou_2_animation_node.getComponent(d);l&&(l.once(d.EventType.FINISHED,(function(){}),this),l.play())}}},a.setButtonState=function(t,e){p(this.statusLabel)&&(this.statusLabel.string=e)},a.show_this_=function(){var t=this;if(this.dailyCount>=6){var e=this.node.position;u(this.node).to(.15,{position:new h(e.x+300,e.y,1)}).call((function(){t.node.active=!1})).start()}else t.node.active=!0},a.onCollectButtonClick=function(){if(this.dailyCount>=6)return g.show("明天再来哦",f.WARN),void this.show_this_();var t=Date.now();this.lastCollectTime>0&&t-this.lastCollectTime<E?g.show("稍等",f.WARN):(this.userDiamonds+=75,this.dailyCount+=1,this.lastCollectTime=t,localStorage.setItem(R,this.userDiamonds.toString()),localStorage.setItem(M,this.dailyCount.toString()),localStorage.setItem(N,this.lastCollectTime.toString()),C.record_coins(C.get_cur_coins()+75),this.updateUI(),this.show_this_())},e}(m)).prototype,"statusLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(I.prototype,"collectButton",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(I.prototype,"dou_2_animation_node",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=I))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/LoadingAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourceManger.ts","./Enums.ts","./Global.ts","./EventsManager.ts","./WxPlatform.ts","./BytePlantform.ts","./BaseWindows.ts","./Logger.ts"],(function(t){var e,n,r,o,a,i,s,c,l,u,d,p,f,_,h,g,m,w,y,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){s=t.cclegacy,c=t._decorator,l=t.Sprite,u=t.Label},function(t){d=t.default},function(t){p=t.EventTyps,f=t.GAME_STATE,_=t.AssetType},function(t){h=t.Global},function(t){g=t.EventsManager},function(t){m=t.WxPlatform},function(t){w=t.BytePlantform},function(t){y=t.BaseWindows},function(t){v=t.Logger}],execute:function(){var b,L,A,x,E,S,k;s._RF.push({},"0f1e4kMbLNMJ6ryLe8c0HF5","LoadingAction",void 0);var R=c.ccclass,M=c.property;t("LoadingAction",(b=R("LoadingAction"),L=M({type:l}),A=M({type:u}),b((S=e((E=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a))||this,r(e,"load",S,o(e)),r(e,"ld_rate",k,o(e)),e._call_back=null,e._is_loading_completed=!1,e}n(e,t);var s=e.prototype;return s.onLoad=function(){g.Ins.addListener(p.LOAD_ASSETS_OVER,this.loaded_completed,this),h.loading_rate=0,this._is_loading_completed=!1},s.onDestroy=function(){g.Ins.removeListener(p.LOAD_ASSETS_OVER,this.loaded_completed,this)},s.start=function(){var t=a(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s.show_windows=function(){var e=a(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=null),t.prototype.show_windows.call(this),this._call_back=n,m.ins.wechat_setting(),w.ins.bytedance_setting(),e.next=7,this.loadRes();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.close_windows=function(){var e=a(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.prototype.close_windows.call(this,n);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),s.loadRes=function(){var t=a(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.instance.load_bundle("remote",.2);case 3:return t.next=5,d.instance.load_resource("remote",_.Prefab,.3);case 5:return t.next=7,d.instance.load_resource("remote",_.Sound,.2);case 7:return t.next=9,d.instance.load_resource("remote",_.Ui,.3);case 9:h.loading_rate=1,g.Ins.dispatch(p.LOAD_ASSETS_OVER),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),v.error("资源加载失败:",t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(){return t.apply(this,arguments)}}(),s.loaded_completed=function(){var t=this;this._is_loading_completed||(this._is_loading_completed=!0,this.scheduleOnce((function(){h.loaded_once(),t.close_windows(f.READY),t._call_back&&t._call_back()}),.5))},s.update=function(t){var e=Math.min(h.loading_rate,1);this.load&&(this.load.fillRange=e),this.ld_rate&&(this.ld_rate.string=Math.floor(100*e)+"")},e}(y)).prototype,"load",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(E.prototype,"ld_rate",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=E))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/Logger.ts",["cc"],(function(n){var r,o;return{setters:[function(n){r=n.cclegacy,o=n._decorator}],execute:function(){var L,e;r._RF.push({},"0dfbcHiIeRKFYETT+nxcfH3","Logger",void 0);var c=o.ccclass;n("Logger",c("Logger")(((e=function(){function n(){}return n.setEnable=function(r){n.ENABLE_LOG=r},n.setLevel=function(r){n.LOG_LEVEL=r},n.log=function(r){if(n.ENABLE_LOG&&n.LOG_LEVEL<=0){for(var o,L=arguments.length,e=new Array(L>1?L-1:0),c=1;c<L;c++)e[c-1]=arguments[c];(o=console).log.apply(o,[n.LOG_PREFIX,r].concat(e))}},n.warn=function(r){if(n.ENABLE_LOG&&n.LOG_LEVEL<=1){for(var o,L=arguments.length,e=new Array(L>1?L-1:0),c=1;c<L;c++)e[c-1]=arguments[c];(o=console).warn.apply(o,[n.LOG_PREFIX,r].concat(e))}},n.error=function(r){if(n.ENABLE_LOG&&n.LOG_LEVEL<=2){for(var o,L=arguments.length,e=new Array(L>1?L-1:0),c=1;c<L;c++)e[c-1]=arguments[c];(o=console).error.apply(o,[n.LOG_PREFIX,r].concat(e))}},n.network=function(r){if(n.ENABLE_LOG&&n.LOG_LEVEL<=0){for(var o,L=arguments.length,e=new Array(L>1?L-1:0),c=1;c<L;c++)e[c-1]=arguments[c];(o=console).log.apply(o,["[NetWork]",r].concat(e))}},n.uiWarning=function(r){if(n.ENABLE_LOG&&n.LOG_LEVEL<=1){for(var o,L=arguments.length,e=new Array(L>1?L-1:0),c=1;c<L;c++)e[c-1]=arguments[c];(o=console).warn.apply(o,["[UI_WARN]",r].concat(e))}},n}()).ENABLE_LOG=!0,e.LOG_LEVEL=0,e.LOG_PREFIX="[WAVES]",L=e))||L);r._RF.pop()}}}));

System.register("chunks:///_virtual/LoseAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseWindows.ts","./XStorage.ts","./Global.ts","./LoseContent_1_Action.ts","./LoseContent_2_Action.ts"],(function(t){var n,o,e,i,c,r,s,l,a,_,u,h,p,w;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){c=t.cclegacy,r=t._decorator,s=t.Node,l=t.Label,a=t.UIOpacity},function(t){_=t.BaseWindows},function(t){u=t.XStorage},function(t){h=t.Global},function(t){p=t.LoseContent_1_Action},function(t){w=t.LoseContent_2_Action}],execute:function(){var f,b,d,g,y,v,m,L,A,z,C,P,S;c._RF.push({},"d3aafJMF9NESb9HYi/uvnj0","LoseAction",void 0);var B=r.ccclass,D=r.property;t("LoseAction",(f=B("LoseAction"),b=D(p),d=D(w),g=D(s),y=D(s),v=D(l),f((A=n((L=function(t){function n(){for(var n,o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(n=t.call.apply(t,[this].concat(c))||this).random_coins=0,e(n,"content_1",A,i(n)),e(n,"content_2",z,i(n)),e(n,"bg_node",C,i(n)),e(n,"coin_layout",P,i(n)),e(n,"coin_label",S,i(n)),n}o(n,t);var c=n.prototype;return c.start=function(){},c.update=function(t){},c.show_windows=function(){t.prototype.show_windows.call(this),this.bg_node&&(this.bg_node.getComponent(a).opacity=255);var n=h.game_layer_action.cur_bubu;h.game_layer_action._cur_lvl_action.get_relife_point(n.node.worldPosition)?this.show_content_1():this.show_content_2();var o=h.main_ui_action.distanceTraveled_M,e=h.game_layer_action._cur_lvl_action.cur_lvl,i=u.get_lvl_progress(),c=i.get(e);if(o>c&&o<=h.level_coin_map.get(e)){this.coin_layout.active=!0;var r=o-c;i.set(e,o),u.record_lvl_progress(i),u.record_coins(u.get_cur_coins()+r),this.coin_label.string=r+""}else this.coin_layout.active=!1},c.show_content_1=function(){this.content_2.close_content(),this.content_1.show_content(this),this.content=this.content_1.node,this.show_content_tween()},c.show_content_2=function(){this.content_1.close_content(),this.content_2.show_content(this),this.content=this.content_2.node,this.show_content_tween()},c.close_windows=function(n){t.prototype.close_windows.call(this,n)},c.waitTime=function(t){var n=this;return new Promise((function(o,e){n.scheduleOnce((function(){o(!0)}),t)}))},n}(_)).prototype,"content_1",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=n(L.prototype,"content_2",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=n(L.prototype,"bg_node",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=n(L.prototype,"coin_layout",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=n(L.prototype,"coin_label",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=L))||m));c._RF.pop()}}}));

System.register("chunks:///_virtual/LoseContent_1_Action.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./AudioManager.ts","./AdManger.ts","./TipsManagerAction.ts","./TipsAction.ts","./Logger.ts"],(function(t){var n,e,i,o,a,c,s,r,_,l,f,u,h,p,d,m;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,c=t._decorator,s=t.Label,r=t.Node,_=t.Animation,l=t.Component},function(t){f=t.Global},function(t){u=t.AudioManager},function(t){h=t.AdManger},function(t){p=t.TipsManagerAction},function(t){d=t.TIPS_TYPE},function(t){m=t.Logger}],execute:function(){var g,v,b,y,A,w,L;a._RF.push({},"93b46rG1qVM5Izzar/5tsSL","LoseContent_1_Action",void 0);var M=c.ccclass,z=c.property;t("LoseContent_1_Action",(g=M("LoseContent_1_Action"),v=z(s),b=z(r),g((w=n((A=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];return n=t.call.apply(t,[this].concat(a))||this,i(n,"time",w,o(n)),i(n,"close_btn_node",L,o(n)),n.root=void 0,n.effect_animation=void 0,n}e(n,t);var a=n.prototype;return a.start=function(){},a.update=function(t){},a.cur_=function(t){u.instance.play_shot("ztime")},a.close_content=function(){this.node.active=!1},a.show_content=function(t){var n=this;this.root=t,this.node.active=!0,this.effect_animation=this.node.getComponent(_);var e=this;this.effect_animation&&(this.effect_animation.once(_.EventType.FINISHED,(function(t){m.log("倒计时结束",t),e.effect_animation=null,n.root.show_content_2()}),this),this.effect_animation.play()),this.close_btn_node.active=!1,this.scheduleOnce((function(){e.close_btn_node.active=!0}),1)},a.on_click_close=function(){u.instance.play_shot("btn_1"),this.effect_animation&&(this.effect_animation.stop(),this.effect_animation=null),this.root.show_content_2()},a.on_click_continue_by_video=function(){var t=this;u.instance.play_shot("btn_1"),this.effect_animation&&this.effect_animation.pause();var n=this;h.show_video((function(e){1==e?(m.log("on_click_continue_by_video 获取奖励成功"),n.reward()):(p.show("看完视频才能复活",d.WARN),t.effect_animation&&(t.effect_animation.play(),m.log("看视频失败，继续播放")))}))},a.reward=function(){this.root.close_windows(null),this.effect_animation&&(this.effect_animation.stop(),this.effect_animation=null),f.game_layer_action.relife_game(f.game_layer_action._cur_lvl_action.get_relife_point(f.game_layer_action.cur_bubu.node.worldPosition))},n}(l)).prototype,"time",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=n(A.prototype,"close_btn_node",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=A))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/LoseContent_2_Action.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./XStorage.ts","./Global.ts","./AdManger.ts","./Logger.ts","./TipsAction.ts","./TipsManagerAction.ts","./EventsManager.ts","./Enums.ts"],(function(n){var t,o,e,i,a,r,c,s,_,u,l,f,p,d,g,h,v,y,A,w;return{setters:[function(n){t=n.applyDecoratedDescriptor,o=n.inheritsLoose,e=n.initializerDefineProperty,i=n.assertThisInitialized,a=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){c=n.cclegacy,s=n._decorator,_=n.Label,u=n.Node,l=n.Component},function(n){f=n.AudioManager},function(n){p=n.XStorage},function(n){d=n.Global},function(n){g=n.AdManger},function(n){h=n.Logger},function(n){v=n.TIPS_TYPE},function(n){y=n.TipsManagerAction},function(n){A=n.EventsManager},function(n){w=n.EventTyps}],execute:function(){var m,b,L,M,T,E,C;c._RF.push({},"636bfkFXHxPu6694FXSImNb","LoseContent_2_Action",void 0);var R=s.ccclass,P=s.property;n("LoseContent_2_Action",(m=R("LoseContent_2_Action"),b=P(_),L=P({type:u,tooltip:"展示视频广告标识"}),m((E=t((T=function(n){function t(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,e(t,"cur_score",E,i(t)),e(t,"ad_video_node",C,i(t)),t.root=void 0,t}o(t,n);var c=t.prototype;return c.start=function(){},c.update=function(n){},c.close_content=function(){this.node.active=!1},c.show_content=function(n){this.root=n,this.node.active=!0;var t=d.main_ui_action.distanceTraveled_M;this.cur_score.string=t+"",f.instance.play_shot("over");var o=p.get_cur_lvl();p.increase_today_fail_count(o),p.is_show_fail_count_flag(o)?this.ad_video_node.active=!0:this.ad_video_node.active=!1},c.on_click_home=function(){f.instance.play_shot("btn_1"),A.Ins.dispatch(w.CLEAR_GAME_LAYER),this.root.close_windows(null),d.ui_layer_action.show_win("Home",null,!1)},c._continue_game=function(){this.root.close_windows(null),d.game_layer_action.relife_game(d.game_layer_action._cur_lvl_action.original.worldPosition)},c.on_click_restart=function(){var n=a(r().mark((function n(){var t,o=this;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:f.instance.play_shot("btn_1"),t=p.get_cur_lvl(),p.is_show_fail_count_flag(t)?(y.show("今日关卡失败次数已达"+d.MAX_FAIL_COUNT+"次，观看视频后可继续游戏",v.WARN),g.show_video((function(n){1===n?(h.log("重置失败次数"),p.reset_fail_count(t),o._continue_game()):y.show("视频播放失败，无法继续游戏",v.WARN)}))):this._continue_game();case 3:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),t}(l)).prototype,"cur_score",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(T.prototype,"ad_video_node",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=T))||M));c._RF.pop()}}}));

System.register("chunks:///_virtual/LotteryAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseWindows.ts","./TipsManagerAction.ts","./TipsAction.ts","./XStorage.ts","./EventsManager.ts","./Enums.ts","./AudioManager.ts","./Logger.ts","./Global.ts","./AdManger.ts"],(function(t){var e,n,i,o,a,r,l,s,c,u,p,b,d,_,h,g,y,f,T,v,R;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,l=t.Node,s=t.Label,c=t.Component,u=t.math,p=t.tween},function(t){b=t.BaseWindows},function(t){d=t.TipsManagerAction},function(t){_=t.TIPS_TYPE},function(t){h=t.XStorage},function(t){g=t.EventsManager},function(t){y=t.EventTyps},function(t){f=t.AudioManager},function(t){T=t.Logger},function(t){v=t.Global},function(t){R=t.AdManger}],execute:function(){var L,A,m,w,E,I,H,N,z,O,M,S,F,D,U,C,X,P,G,Y,k,V,x;a._RF.push({},"27fcb9h9GVAcIDETVYyErft","LotteryAction",void 0);var W=r.ccclass,B=r.property,j=function(t){return t[t.FIRST=1]="FIRST",t[t.SECOND=2]="SECOND",t[t.THIRD=3]="THIRD",t[t.FOURTH=4]="FOURTH",t[t.FIFTH=5]="FIFTH",t[t.SIXTH=6]="SIXTH",t[t.SEVENTH=7]="SEVENTH",t[t.EIGHTH=8]="EIGHTH",t}(j||{}),q=[{type:j.FIRST,name:"一等奖",centerAngle:22.5,data:40},{type:j.SECOND,name:"二等奖",centerAngle:67.5,data:130},{type:j.THIRD,name:"三等奖",centerAngle:112.5,data:140},{type:j.FOURTH,name:"四等奖",centerAngle:157.5,data:250},{type:j.FIFTH,name:"五等奖",centerAngle:202.5,data:260},{type:j.SIXTH,name:"六等奖",centerAngle:247.5,data:270},{type:j.SEVENTH,name:"七等奖",centerAngle:292.5,data:280},{type:j.EIGHTH,name:"八等奖",centerAngle:337.5,data:390}];t("LotteryAction",(L=W("LotteryAction"),A=B({type:l,tooltip:"实际进行旋转的转盘节点 (例如：Turntable Sprite)"}),m=B({type:l,tooltip:"点击抽奖的按钮节点"}),w=B({type:l,tooltip:"点击抽奖的按钮节点"}),E=B({type:s,tooltip:"显示最终中奖结果的 Label 组件 (这里改为显示次数/提示)"}),I=B({type:s,tooltip:"显示剩余免费或广告次数的 Label 组件"}),H=B({type:l,tooltip:"显示视频播放 "}),N=B({type:[l],tooltip:"转盘上 8 个奖项的文字节点 (按1-8等奖顺序)"}),z=B({slide:!0,range:[100,300,10],step:10,tooltip:"奖项文字距离转盘中心的径向距离"}),O=B({slide:!0,range:[3,5,1],step:1,tooltip:"转盘至少旋转的圈数"}),M=B({slide:!0,range:[2.5,5,.1],step:.1,tooltip:"转盘旋转总时长 (秒)"}),L((D=e((F=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"turntableNode",D,o(e)),i(e,"btn_lottery",U,o(e)),i(e,"btn_close",C,o(e)),i(e,"resultLabel",X,o(e)),i(e,"countLabel",P,o(e)),i(e,"video_node",G,o(e)),i(e,"prizeTextNodes",Y,o(e)),i(e,"radialDistance",k,o(e)),i(e,"minRotationRounds",V,o(e)),i(e,"rotationDuration",x,o(e)),e.isRotating=!1,e.call_back=void 0,e}n(e,t);var a=e.prototype;return a.start=function(){this.updateLotteryUI(),this.initializePrizeLabels()},a.on_start_lottery=function(){if(!this.isRotating){var t=h.get_today_lottery_count();v.MAX_LOTTERY_COUNT-t<=0?d.show("明天再来哦~",_.OK):0===t?(T.log("Lottery: 第一次抽奖，免费开始！"),this._startRotation()):(T.log("Lottery: 第 "+(t+1)+" 次抽奖，观看广告获取！"),this._showAdForLottery())}},a._showAdForLottery=function(){var t=this;this.btn_lottery.getComponent(c).enabled=!1,R.show_video((function(e){t.btn_lottery.getComponent(c).enabled=!0,1==e?(T.log("Lottery: 广告观看成功，开始抽奖。"),t._startRotation()):(d.show("看广告才能抽奖哦！",_.WARN),T.warn("Lottery: 广告观看失败或跳过，无法抽奖。"))}))},a._startRotation=function(){this.isRotating=!0;var t=this.simulatePrizeResult(),e=this.turntableNode.angle,n=this.calculateTargetAngle(t,e);this.btn_close&&(this.btn_close.active=!1),this.runRotation(n,t)},a.onRotationFinished=function(t){this.isRotating=!1;var e=this.turntableNode.angle;this.turntableNode.angle=e%360;var n=q[t-1].data;h.increase_today_lottery_count(v.MAX_LOTTERY_COUNT),h.record_coins(h.get_cur_coins()+n),g.Ins.dispatch(y.RERUSH_SHOW_GG),this.updateLotteryUI(),this.btn_close&&(this.btn_close.active=!0)},a.updateLotteryUI=function(){var t=h.get_today_lottery_count(),e=v.MAX_LOTTERY_COUNT-t;this.btn_lottery.active=!0,this.resultLabel.node.active=!1,e<=0?(this.btn_lottery.active=!1,this.video_node.active=!1,this.resultLabel.node.active=!0,this.resultLabel.string="今日次数用尽",this.countLabel.string="今日次数: 0/"+v.MAX_LOTTERY_COUNT):0===t?(this.video_node.active=!1,this.countLabel.string="今日次数: 1/"+v.MAX_LOTTERY_COUNT):(this.video_node.active=!0,this.countLabel.string="今日次数: "+e+"/"+v.MAX_LOTTERY_COUNT),T.log("Lottery UI Updated. Current Count: "+t+", Remaining: "+e)},a.initializePrizeLabels=function(){for(var t=0;t<q.length;t++){var e=this.prizeTextNodes[t],n=q[t],i=e.getComponent(s);i&&(i.string=n.data+"");var o=u.toRadian(n.centerAngle),a=this.radialDistance*Math.cos(o),r=this.radialDistance*Math.sin(o);e.setPosition(a,r);var l=n.centerAngle-90;l<0&&(l+=360),e.angle=l}},a.calculateTargetAngle=function(t,e){var n=90-q[t-1].centerAngle;n<0&&(n+=360);var i=n-e%360;return i<=0&&(i+=360),360*this.minRotationRounds+i},a.simulatePrizeResult=function(){return Math.floor(8*Math.random())+1},a.runRotation=function(t,e){var n=this;f.instance.play_shot("lottery_start"),p(this.turntableNode).by(this.rotationDuration,{angle:t},{easing:"quadInOut"}).call((function(){n.onRotationFinished(e)})).start()},a.show_windows=function(e){void 0===e&&(e=null),t.prototype.show_windows.call(this),this.call_back=e,this.updateLotteryUI(),this.btn_close&&(this.btn_close.active=!0)},a.close_windows=function(e){t.prototype.close_windows.call(this,e)},a.on_click_btn_continue=function(){f.instance.play_shot("btn_1"),this.close_windows(null);var t=this;t.call_back&&(t.call_back(),t.call_back=null),this.btn_close&&(this.btn_close.active=!1)},e}(b)).prototype,"turntableNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(F.prototype,"btn_lottery",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(F.prototype,"btn_close",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(F.prototype,"resultLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(F.prototype,"countLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(F.prototype,"video_node",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(F.prototype,"prizeTextNodes",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=e(F.prototype,"radialDistance",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),V=e(F.prototype,"minRotationRounds",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),x=e(F.prototype,"rotationDuration",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3.5}}),S=F))||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/LvlAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ColliderAction.ts","./Logger.ts"],(function(e){var r,t,n,i,o,l,a,c,u,s,f,p,g,v,d;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose,l=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){c=e.cclegacy,u=e._decorator,s=e.Node,f=e.ParticleSystem2D,p=e.Component,g=e.Label},function(e){v=e.ColliderAction},function(e){d=e.Logger}],execute:function(){var h,_,y,L,b,m,A,w,x;c._RF.push({},"3325cCmfQ9PDb7ONWWf4iKQ","LvlAction",void 0);var C=u.ccclass,P=u.property;e("LvlAction",(h=C("LvlAction"),_=P(s),y=P(s),L=P(s),h((A=r((m=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),l=0;l<t;l++)o[l]=arguments[l];return r=e.call.apply(e,[this].concat(o))||this,n(r,"original",A,i(r)),n(r,"target",w,i(r)),n(r,"relifte_node",x,i(r)),r.cur_lvl=0,r}t(r,e);var c=r.prototype;return c.start=function(){this.original&&this.relifte_node||d.error("LvlAction: original 或 relifte_node 节点未设置！")},c.update=function(e){},c.init_lvl_async=function(){var e=l(a().mark((function e(r){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cur_lvl=r,this.original.children.forEach((function(e){var t=e.getComponent(g);t&&(t.string="LEVEL "+r)})),t=[],this.node.children.forEach((function(e){var r=e.getComponent(v);r&&t.push(r.init_async())})),e.next=6,Promise.all(t);case 6:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),c.get_relife_point=function(e){if(!this.relifte_node)return d.warn("LvlAction: relifte_node 节点不存在"),null;for(var r,t=null,n=Number.MAX_VALUE,i=this.relifte_node.children,l=o(i);!(r=l()).done;){var a=r.value.worldPosition;if(a.x<e.x){var c=e.x-a.x;c<n&&(n=c,t=a)}}return t||null},c.get_target_particele_world_pos=function(){for(var e=this.target.children,r=null,t=0;t<e.length;t++){var n=e[t];if(n)if(n.getComponent(f)){r=n.worldPosition;break}}return r},r}(p)).prototype,"original",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=r(m.prototype,"target",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=r(m.prototype,"relifte_node",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=m))||b));c._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AudioManager.ts","./BackgroundAnimator.ts","./BaseWindows.ts","./BubuAction.ts","./CameraAction.ts","./ChilunAction.ts","./CoinManagerAction.ts","./ColliderAction.ts","./CountTimerAction.ts","./CustomVirtualList.ts","./Enums.ts","./EventsManager.ts","./GameLayerAction.ts","./GameManager.ts","./Global.ts","./HomeAction.ts","./HomeCxtClassicAction.ts","./HomeCxtHomeAction.ts","./LevelItem.ts","./LimitedCollect.ts","./LoadingAction.ts","./Logger.ts","./LoseAction.ts","./LoseContent_1_Action.ts","./LoseContent_2_Action.ts","./LotteryAction.ts","./LvlAction.ts","./MainUiLayerAction.ts","./NumberAction.ts","./NumberTexture.ts","./PauseAction.ts","./ReliftAction.ts","./ResourceManger.ts","./ResourcePool.ts","./RoleControlAction.ts","./SiderAction.ts","./SilderManager.ts","./SkinAction.ts","./SkinItemAction.ts","./TipsAction.ts","./TipsManagerAction.ts","./Tools.ts","./TrailAction.ts","./UILayerAction.ts","./WinAction.ts","./XStorage.ts","./AdManger.ts","./BytePlantform.ts","./WxPlatform.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainUiLayerAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./Logger.ts"],(function(t){var e,r,i,n,o,a,s,c,l,u,_,p,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Sprite,c=t.Label,l=t.Vec3,u=t.Component},function(t){_=t.GAME_STATE},function(t){p=t.Global},function(t){g=t.Logger}],execute:function(){var h,d,f,P,b,y,M,m,E;o._RF.push({},"a85b9nLEjRAHbn5ZIS9IYZa","MainUiLayerAction",void 0);var L=a.ccclass,v=a.property;t("MainUiLayerAction",(h=L("MainUiLayerAction"),d=v(s),f=v(c),P=v(c),h((M=e((y=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"progress_bar",M,n(e)),i(e,"cur_progress",m,n(e)),i(e,"cur_distance",E,n(e)),e.PIXELS_PER_METER=100,e.startWorldPosition=new l,e.targetWorldPosition=new l,e.totalDistance_px=0,e.currentProgressPercent=0,e.distanceTraveled_M=0,e}r(e,t);var o=e.prototype;return o.onLoad=function(){p.main_ui_action=this},o.update_original_target_world_pos=function(t,e){this.startWorldPosition.set(t),this.targetWorldPosition.set(e),this.totalDistance_px=l.distance(this.targetWorldPosition,this.startWorldPosition)},o.update_game_progress=function(t){var e=l.distance(t,this.startWorldPosition);if(this.distanceTraveled_M=Math.ceil(e/this.PIXELS_PER_METER),this.cur_distance.string=this.distanceTraveled_M+"",this.totalDistance_px<=0)this.currentProgressPercent=100;else{var r=e/this.totalDistance_px;r=Math.min(1,Math.max(0,r)),this.currentProgressPercent=Math.ceil(1e4*r/100),this.progress_bar.fillRange=r,this.cur_progress.string=this.currentProgressPercent+""}},o.start=function(){},o.update=function(t){},o.on_click_open_home=function(){p._game_state==_.START?p.ui_layer_action.show_win("Pause",null,!0,_.PAUSE):g.log("当前游戏状态不可暂停:",p._game_state)},e}(u)).prototype,"progress_bar",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(y.prototype,"cur_progress",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=e(y.prototype,"cur_distance",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=y))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/NumberAction.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,e,i,n,o,u,l,s;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,u=t._decorator,l=t.tween,s=t.Label}],execute:function(){var a,c,b,h;o._RF.push({},"ed01fIhkRdIQJb2dbbRK1/I","NumberAction",void 0);var g=u.ccclass,m=u.property;t("NumberAction",g("NumberAction")((b=r((c=function(t){function r(){for(var r,e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];return r=t.call.apply(t,[this].concat(o))||this,i(r,"targetNumber",b,n(r)),i(r,"rollSpeed",h,n(r)),r._currentNumber=0,r._isRolling=!1,r}e(r,t);var o=r.prototype;return o.startRoll=function(){this._isRolling||(this._isRolling=!0,this._rollToTargetNumber())},o._rollToTargetNumber=function(){for(var t=this.targetNumber>this._currentNumber?1:-1,r=Math.ceil(Math.abs(this.targetNumber-this._currentNumber)/this.rollSpeed),e=0;e<r;e++)if(this._currentNumber+=t,this.string=this._currentNumber.toString(),this._currentNumber>=this.targetNumber){this._currentNumber=this.targetNumber,this.string=this.targetNumber.toString(),this._isRolling=!1;break}this._isRolling&&l(this).delay(.05).call(this._rollToTargetNumber.bind(this)).start()},r}(s)).prototype,"targetNumber",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=r(c.prototype,"rollSpeed",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),a=c))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/NumberTexture.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,c,o,u,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){c=e.cclegacy,o=e._decorator,u=e.RichText,a=e.Component}],execute:function(){var s,l,p,h,f;c._RF.push({},"c4663gCuCFGeJcVRKN4hj92","NumberTexture",void 0);var g=o.ccclass,m=o.property;e("NumberTexture",(s=g("NumberTexture"),l=m(u),s((f=t((h=function(e){function t(){for(var t,r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return t=e.call.apply(e,[this].concat(c))||this,i(t,"richText",f,n(t)),t}r(t,e);var c=t.prototype;return c.start=function(){},c.update=function(e){},c.setNum=function(e){for(var t=(e+"").split(""),r="",i=0;i<t.length;i++)r+='<img src="'+t[i]+'"/>';this.richText.string=r},t}(a)).prototype,"richText",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=h))||p));c._RF.pop()}}}));

System.register("chunks:///_virtual/PauseAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseWindows.ts","./Enums.ts","./XStorage.ts","./Global.ts","./EventsManager.ts","./AudioManager.ts","./Logger.ts"],(function(n){var o,t,i,e,s,c,l,a,u,r,_,p,d,f,h,w;return{setters:[function(n){o=n.applyDecoratedDescriptor,t=n.inheritsLoose,i=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){s=n.cclegacy,c=n._decorator,l=n.Label,a=n.Node},function(n){u=n.BaseWindows},function(n){r=n.GAME_STATE,_=n.EventTyps},function(n){p=n.XStorage},function(n){d=n.Global},function(n){f=n.EventsManager},function(n){h=n.AudioManager},function(n){w=n.Logger}],execute:function(){var g,v,y,A,b,E,M;s._RF.push({},"eae4a/ZRyJGiozzdAd4rvoC","PauseAction",void 0);var m=c.ccclass,L=c.property;n("PauseAction",(g=m("PauseAction"),v=L(l),y=L(a),g((E=o((b=function(n){function o(){for(var o,t=arguments.length,s=new Array(t),c=0;c<t;c++)s[c]=arguments[c];return o=n.call.apply(n,[this].concat(s))||this,i(o,"lvl_label",E,e(o)),i(o,"sound_icon",M,e(o)),o}t(o,n);var s=o.prototype;return s.start=function(){},s.update=function(n){},s.init=function(){this.lvl_label.string=p.get_cur_lvl()+"",this.sound_icon.active=!d.open_sound},s.show_windows=function(o,t){void 0===o&&(o=null),void 0===t&&(t=r.PAUSE),n.prototype.show_windows.call(this,o,t),this.init()},s.close_windows=function(o,t){n.prototype.close_windows.call(this,o,t)},s.on_click_sound=function(){h.instance.play_shot("btn_1"),d.open_sound=!d.open_sound,this.sound_icon.active=!d.open_sound},s.on_click_resume=function(){w.log("继续游戏"),h.instance.play_shot("btn_1"),this.close_windows(null),f.Ins.dispatch(_.READY_START_GAME)},s.on_click_home=function(){var n=this;h.instance.play_shot("btn_1"),f.Ins.dispatch(_.CLEAR_GAME_LAYER),w.log("返回主界面"),this.close_windows(null,(function(){n.scheduleOnce((function(){d.ui_layer_action.show_win("Home",null,!1)}),.1)}))},o}(u)).prototype,"lvl_label",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=o(b.prototype,"sound_icon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=b))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/ReliftAction.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,i,n,o,l,c,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,c=t.Label,a=t.Component}],execute:function(){var s,u,p,f,y;o._RF.push({},"e39e4qxMxRBw7gOsprXgPlZ","ReliftAction",void 0);var b=l.ccclass,g=l.property;t("ReliftAction",(s=b("ReliftAction"),u=g(c),s((y=e((f=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,i(e,"label_str",y,n(e)),e}r(e,t);var o=e.prototype;return o.start=function(){this.label_str.string=""},o.update=function(t){},e}(a)).prototype,"label_str",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceManger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Enums.ts","./Global.ts","./ResourcePool.ts","./AudioManager.ts","./Logger.ts"],(function(r){var t,e,n,a,o,i,s,u,c,_,l,p;return{setters:[function(r){t=r.createClass,e=r.asyncToGenerator,n=r.regeneratorRuntime},function(r){a=r.cclegacy,o=r.JsonAsset,i=r.SpriteFrame,s=r.assetManager},function(r){u=r.AssetType},function(r){c=r.Global},function(r){_=r.ResourcePool},function(r){l=r.AudioManager},function(r){p=r.Logger}],execute:function(){a._RF.push({},"a3bb4Of+I5N76ONiX1ivDrt","ResourceManger",void 0),r("default",function(){function r(){this.bundle_map={},this.clip_map={},this._atlasMap={},this._json_config={},this._uiMap={},this._last_progress_ratio=0,this._frame_count=0,this.UPDATE_INTERVAL_FRAMES=2}var a=r.prototype;return a.load_bundle=function(){var r=e(n().mark((function r(t,e){var a=this;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return void 0===e&&(e=0),r.abrupt("return",new Promise((function(r,n){s.loadBundle(t,(function(n,o){n?(p.error(t+" --------------------------load errors>>>",n),c.loading_rate+=e,r()):(a.bundle_map[t]=o,c.loading_rate+=e,r())}))})));case 2:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),a.load_resource=function(){var r=e(n().mark((function r(t,e,a){var i=this;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===a&&(a=0),this.bundle_map[t]){r.next=5;break}return p.error("Bundle "+t+" 未加载，无法加载资源 "+e.path),c.loading_rate+=a,r.abrupt("return",Promise.resolve());case 5:return this._last_progress_ratio=0,r.abrupt("return",new Promise((function(r,n){i.bundle_map[t].loadDir(e.path,e.type,(function(r,t){if(i._frame_count++,i._frame_count%i.UPDATE_INTERVAL_FRAMES==0){var e=r/t,n=(e-i._last_progress_ratio)*a;c.loading_rate=Math.min(c.loading_rate+n,1),i._last_progress_ratio=e}}),(function(n,s){try{n?p.error("load_resource error >>>",t+">>"+e.path," err>",n,"assets>",s):null==s||s.forEach((function(r){switch(e){case u.Prefab:_.instance.set_prefab(r.data.name,r);break;case u.Sound:i.clip_map[r.name]=r,l.instance.add_clip(r.name,r);break;case u.Ui:i._uiMap[r.name]=r;break;case u.Atlas:i._atlasMap[r.name]||(i._atlasMap[r.name]=r);break;case u.Json:!i._json_config[r.name]&&r instanceof o&&(i._json_config[r.name]=r.json)}}));var f=(1-i._last_progress_ratio)*a;c.loading_rate+=f,r()}catch(n){p.log("catch:",t+">>"+e.path+"loaded error:",n),c.loading_rate+=(1-i._last_progress_ratio)*a,r()}}))})));case 7:case"end":return r.stop()}}),r,this)})));return function(t,e,n){return r.apply(this,arguments)}}(),a.get_clip=function(r){return this.clip_map[r]},a.get_ui=function(r){return this._uiMap[r]},a.get_data_type=function(r){if(void 0===r&&(r="config"),this._json_config[r]&&this._json_config[r].types){var t=this._json_config[r].types;p.log("JSON Config: "+r+", types array length: "+t.length)}else p.error("JSON资源 "+r+" 或其 'types' 属性不存在!")},a.get_data_type_length=function(r){var t;void 0===r&&(r="config");var e=null==(t=this._json_config[r])?void 0:t.types;return e?e.length:0},a.get_data_type_cells=function(r,t){var e;void 0===t&&(t="config");var n=null==(e=this._json_config[t])?void 0:e.types;if(n&&r>=0&&r<n.length)return n[r].cells;p.warn("配置 "+t+" 中索引 "+r+" 的 cells 不存在!")},a.get_data_type_score=function(r,t){var e;void 0===t&&(t="config");var n=null==(e=this._json_config[t])?void 0:e.types;if(n&&r>=0&&r<n.length)return n[r].score;p.warn("配置 "+t+" 中索引 "+r+" 的 score 不存在!")},a.get_println_config=function(){p.log("get_println_config - 缓存的 JSON 配置:",this._json_config)},a.get_spriteframe=function(r){var t=this._atlasMap.comboNumber;return t?t.getSpriteFrame(r):(p.warn("图集 'comboNumber' 不存在，无法获取 SpriteFrame "+r),null)},a.setSpriteFromAtlas=function(){var r=e(n().mark((function r(t,e){var a=this;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,n){var o=a.get_spriteframe(t);o?(e.spriteFrame=o,r(e)):n(new Error("无法从图集中获取 SpriteFrame: "+t))})));case 1:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),a.setSpriteFromUI=function(){var r=e(n().mark((function r(t,e){var a=this;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,n){var o=a.get_ui(t);o instanceof i?(e.spriteFrame=o,r(e)):n(new Error("无法从 UI 缓存中获取 SpriteFrame: "+t))})));case 1:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),t(r,null,[{key:"instance",get:function(){return this.rm||(this.rm=new r),this.rm}}]),r}()).rm=null,a._RF.pop()}}}));

System.register("chunks:///_virtual/ResourcePool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tools.ts","./LevelItem.ts","./Logger.ts"],(function(e){var t,o,r,n,i,a,s,c,u,l,p;return{setters:[function(e){t=e.createClass,o=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy,i=e._decorator,a=e.instantiate,s=e.v3,c=e.Quat},function(e){u=e.Tools},function(e){l=e.LevelItem},function(e){p=e.Logger}],execute:function(){var f,v;n._RF.push({},"c6752LdbbhKF590O6duE2qa","ResourcePool",void 0);var _=i.ccclass;i.property,e("ResourcePool",_("ResourcePool")(((v=function(){function e(){this.prefab_pool=new Map,this._poolRemoveNode=new Map,this._poolActive=new Map}var n=e.prototype;return n.set_prefab=function(e,t){this.prefab_pool.set(e,t)},n.get_prefab=function(e){return this.prefab_pool.get(e)},n.create_by_Pool=function(){var e=o(r().mark((function e(t,o,n,i){var a,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i&&(i=!0),a=this._poolRemoveNode.get(t),(c=this._poolActive.get(t))||(c=[],this._poolActive.set(t,c)),!(a&&a.length>0)){e.next=14;break}return s=a.shift(),c.indexOf(s)<0&&u.insertArr(c,s),s.active=!0,s.setParent(n,i),o&&s.setWorldPosition(o),p.log("createPrefabFromPool  重复使用  >>>",t),e.abrupt("return",s);case 14:return e.prev=14,e.next=17,this.create_new_node(t,o,n,i);case 17:return s=e.sent,c.indexOf(s)<0&&u.insertArr(c,s),p.log("createPrefabFromPool  create  >>>",t),e.abrupt("return",s);case 23:throw e.prev=23,e.t0=e.catch(14),p.error("create_new_node err>>>>",e.t0),e.t0;case 27:case"end":return e.stop()}}),e,this,[[14,23]])})));return function(t,o,r,n){return e.apply(this,arguments)}}(),n.create_new_node=function(e,t,o,r){var n=this;return void 0===r&&(r=!0),new Promise((function(i,s){var c=n.prefab_pool.get(e);if(!c)return s("Failed to load prefab data: "+e+".");var u=a(c);if(!u)return s("Failed to instantiate prefab.");t&&u.setWorldPosition(t),u.setParent(o,r),u.name=e,i(u)}))},n.remove_node=function(e){var t=e.name,o=e.getComponent(l);o&&o.reset(),e.setPosition(s(0,0,0)),e.setScale(s(1,1,1)),e.setRotation(c.IDENTITY.clone()),e.active=!1,e.removeFromParent();var r=this._poolActive.get(t);if(r){var n=r.indexOf(e);n>-1&&r.splice(n,1)}var i=this._poolRemoveNode.get(t);i||(i=[],this._poolRemoveNode.set(t,i)),i.indexOf(e)<0&&u.insertArr(i,e)},t(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,f=v))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/RoleControlAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./Enums.ts","./AudioManager.ts"],(function(t){var n,o,e,i,c,u,r,s,a;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,i=t.Input,c=t.Component},function(t){u=t.Global},function(t){r=t.GAME_STATE,s=t.DIR},function(t){a=t.AudioManager}],execute:function(){var _;o._RF.push({},"2cc1c4tmExBvrM2nJwCHsYd","RoleControlAction",void 0);var l=e.ccclass;e.property,t("RoleControlAction",l("RoleControlAction")(_=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var e=o.prototype;return e.onLoad=function(){this.node.on(i.EventType.TOUCH_START,this.touch_begin,this),this.node.on(i.EventType.TOUCH_END,this.touch_end,this),this.node.on(i.EventType.TOUCH_CANCEL,this.touch_end,this)},e.start=function(){},e.update=function(t){},e.touch_begin=function(t){u._game_state==r.START&&(a.instance.play_shot("zizi"),u.game_layer_action.event_update_direction(s.RIGHT_UP))},e.touch_end=function(t){u._game_state==r.START&&u.game_layer_action.event_update_direction(s.RIGHT_DOWN)},o}(c))||_);o._RF.pop()}}}));

System.register("chunks:///_virtual/SiderAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BytePlantform.ts","./Global.ts","./XStorage.ts","./TipsManagerAction.ts","./TipsAction.ts","./EventsManager.ts","./Enums.ts","./BaseWindows.ts","./Logger.ts"],(function(t){var n,i,e,o,s,r,a,c,l,_,d,g,u,f,h,p,b;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Label,c=t.Widget},function(t){l=t.BytePlantform},function(t){_=t.Global},function(t){d=t.XStorage},function(t){g=t.TipsManagerAction},function(t){u=t.TIPS_TYPE},function(t){f=t.EventsManager},function(t){h=t.EventTyps},function(t){p=t.BaseWindows},function(t){b=t.Logger}],execute:function(){var w,y,v,A,m,S,E;s._RF.push({},"e33af2MqUpB0oZ1YgRI0scp","SiderAction",void 0);var I=r.ccclass,T=r.property;t("SiderPageAction",(w=I("SiderAction"),y=T({type:a}),v=T({type:a}),w((S=n((m=function(t){function n(){for(var n,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return n=t.call.apply(t,[this].concat(s))||this,e(n,"btn_label",S,o(n)),e(n,"gift_coins_label",E,o(n)),n}i(n,t);var s=n.prototype;return s.onLoad=function(){this.node.active=!1,f.Ins.addListener(h.DOUYIN_SILDER_show_refrush_data,this.refrush_data,this)},s.start=function(){},s.update=function(t){},s.show_windows=function(n){t.prototype.show_windows.call(this),this.node.active=!0,this.node.setPosition(0,0),this.node.getComponent(c)&&(this.node.getComponent(c).right=0,this.node.getComponent(c).left=0,this.node.getComponent(c).top=0,this.node.getComponent(c).bottom=0),this.refrush_data()},s.close_windows=function(n){t.prototype.close_windows.call(this,n)},s.refrush_data=function(){b.log("刷新 refrush_data   event"),this.gift_coins_label.string="+"+_.gift_coins,0==d.get_gift()?this.btn_label.string="跳转侧边栏":1==d.get_gift()?this.btn_label.string="领取奖励":this.btn_label.string="跳转侧边栏"},s.on_click_close=function(){this.close_windows(null),f.Ins.dispatch(h.READY_START_GAME)},s.btn_run=function(){b.log("btn_run"),0==d.get_gift()?this.add_siderbar():1==d.get_gift()?this.get_gift():this.add_siderbar()},s.get_gift=function(){g.show("获取奖励"+_.gift_coins,u.OK),d.record_gift(2),d.record_coins(d.get_cur_coins()+_.gift_coins),f.Ins.dispatch(h.DOUYIN_SILDER_show_gift_btn),this.close_windows(null),f.Ins.dispatch(h.READY_START_GAME)},s.add_siderbar=function(){b.log("开始添加 add_siderbar"),l.ins.navigate_to_douyin((function(t){t?b.log("add_siderbar 添加侧边栏跳转成功"):b.log("add_siderbar 跳转失败")}))},n}(p)).prototype,"btn_label",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=n(m.prototype,"gift_coins_label",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=m))||A));s._RF.pop()}}}));

System.register("chunks:///_virtual/SilderManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BytePlantform.ts","./Global.ts","./XStorage.ts","./EventsManager.ts","./Enums.ts","./Logger.ts"],(function(t){var i,n,e,o,r,s,c,a,l,_,u,g,f,d;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Node,a=t.Component},function(t){l=t.BytePlantform},function(t){_=t.Global},function(t){u=t.XStorage},function(t){g=t.EventsManager},function(t){f=t.EventTyps},function(t){d=t.Logger}],execute:function(){var h,p,b,y,v;r._RF.push({},"c0711A/xmJLdpcQpQldQO14","SilderManager",void 0);var S=s.ccclass,k=s.property;t("SilderManager",(h=S("SilderManager"),p=k({type:c}),h((v=i((y=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,e(i,"btn_sider",v,o(i)),i}n(i,t);var r=i.prototype;return r.onLoad=function(){g.Ins.addListener(f.DOUYIN_SILDER_show_gift_btn,this.show_gift_btn,this)},r.start=function(){this.check_douyin()},r.update=function(t){},r.btn_checkSideBar=function(){d.log("开始检查 检查侧边栏"),l.ins.check_side_bar((function(t){t?d.log("checkSideBar 检查侧边栏 success"):d.log("checkSideBar 跳转失败 fail")}))},r.open_side_page=function(){_.ui_layer_action.show_win("Slider")},r.check_douyin=function(){this.show_gift_btn();var t=this;l.ins.check_side_bar((function(i){i?(d.log("check_douyin 检查侧边栏 success,可以使用侧边栏"),t.listenFromDouyi()):d.log("check_douyin 跳转失败 fail,结束判断")}))},r.show_gift_btn=function(){d.log("刷新 奖励按钮      event"),this.btn_sider.active=!1;var t=this;2==u.get_gift()?(this.btn_sider.active=!1,d.log("show_gift_btn 领取过奖励 不显示 ")):l.ins.check_side_bar((function(i){i?(d.log("show_gift_btn 检查侧边栏 success显示 "),t.btn_sider.active=!0):(d.log("show_gift_btn 检查侧边栏  fail "),t.btn_sider.active=!1)}))},r.listenFromDouyi=function(){2!=u.get_gift()?l.ins.listen_douyin((function(t){t?(d.log("main 从侧边栏调过来，可以奖励用户了！"),u.get_gift()<1&&(u.record_gift(1),d.log("add_siderbar 添加侧边栏跳转成功,记录数据 1"),g.Ins.dispatch(f.DOUYIN_SILDER_show_refrush_data))):d.log("main 不是从侧边栏调过来")})):d.log("check_douyin2 侧边栏奖励领取过，直接返回")},i}(a)).prototype,"btn_sider",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=y))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/SkinAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseWindows.ts","./Enums.ts","./Global.ts","./XStorage.ts","./ResourcePool.ts","./SkinItemAction.ts","./Logger.ts","./ResourceManger.ts","./AudioManager.ts","./EventsManager.ts","./TipsManagerAction.ts","./TipsAction.ts"],(function(n){var t,i,e,o,s,r,c,a,l,_,u,d,b,h,f,p,g,y,k,v,w,A,m,S;return{setters:[function(n){t=n.applyDecoratedDescriptor,i=n.inheritsLoose,e=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){s=n.cclegacy,r=n._decorator,c=n.Layout,a=n.Label,l=n.Button,_=n.Node,u=n.Vec3},function(n){d=n.BaseWindows},function(n){b=n.GAME_STATE,h=n.EventTyps},function(n){f=n.Global},function(n){p=n.XStorage},function(n){g=n.ResourcePool},function(n){y=n.SkinItemAction},function(n){k=n.Logger},function(n){v=n.default},function(n){w=n.AudioManager},function(n){A=n.EventsManager},function(n){m=n.TipsManagerAction},function(n){S=n.TIPS_TYPE}],execute:function(){var E,T,P,x,M,B,I,L,R,U,z;s._RF.push({},"75730iCOwhKjppLhZeidTeG","SkinAction",void 0);var D=r.ccclass,G=r.property;n("SkinAction",(E=D("SkinAction"),T=G(c),P=G(a),x=G(l),M=G(_),E((L=t((I=function(n){function t(){for(var t,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return t=n.call.apply(n,[this].concat(s))||this,e(t,"layout",L,o(t)),e(t,"coin_label",R,o(t)),e(t,"btn_buy",U,o(t)),e(t,"btn_buy_skin",z,o(t)),t.selected_index=0,t.skin_item_arr=[],t}i(t,n);var s=t.prototype;return s.start=function(){},s.update=function(n){},s.show_windows=function(t,i){var e=this;void 0===t&&(t=null),void 0===i&&(i=b.PAUSE),n.prototype.show_windows.call(this,t,i),this.coin_label.string=p.get_cur_coins()+"",this.btn_buy.interactable=!1,this.btn_buy_skin.active=!0;for(var o=0;o<this.skin_item_arr.length;o++)g.instance.remove_node(this.skin_item_arr[o].node);this.skin_item_arr=[];for(var s=[],r=1;r<=30;r++)v.instance.get_ui("bubu_"+r)&&s.push(r);for(var c=p.get_skin_arr(),a=p.get_cur_skin(),l=function(){var n=s[_];g.instance.create_by_Pool("skin_item",u.ZERO,e.layout.node).then((function(t){var i=t.getComponent(y);i&&(i.init(n,c,a,f.skin_cost,e),e.skin_item_arr.push(i))}))},_=0;_<s.length;_++)l();k.log("SkinAction: 显示皮肤界面"),k.log("layout",this.layout)},s.close_windows=function(t,i){n.prototype.close_windows.call(this,t,i)},s.select_item=function(n){this.selected_index=n,this.skin_item_arr.forEach((function(t){t.index_name!=n?t.border_node&&(t.border_node.active=!1):t.border_node&&(t.border_node.active=!0)})),k.log("SkinAction: 选择了皮肤 ",this.selected_index),this.btn_buy&&(this.btn_buy.interactable=!0,this.btn_buy_skin.active=!1)},s.on_click_buy=function(){k.log("SkinAction: 点击购买皮肤"),w.instance.play_shot("btn_1");for(var n=p.get_skin_arr(),t=!1,i=0;i<n.length;i++){if(n[i]==this.selected_index){t=!0;break}}if(t)p.record_cur_skin(this.selected_index),this.close_windows(null),A.Ins.dispatch(h.UPDATE_BUBU_SKIN);else{if(p.get_cur_coins()<f.skin_cost)return void m.show("没有足够的⚡️",S.WARN);p.record_coins(p.get_cur_coins()-f.skin_cost),n.push(this.selected_index),p.record_skin_arr(n,this.selected_index),this.close_windows(null),A.Ins.dispatch(h.UPDATE_BUBU_SKIN)}},s.on_click_close=function(){w.instance.play_shot("btn_1"),this.close_windows(null)},t}(d)).prototype,"layout",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(I.prototype,"coin_label",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=t(I.prototype,"btn_buy",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(I.prototype,"btn_buy_skin",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=I))||B));s._RF.pop()}}}));

System.register("chunks:///_virtual/SkinItemAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourceManger.ts","./Logger.ts"],(function(e){var i,t,n,r,o,a,c,s,l,u,b,_;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Sprite,s=e.Node,l=e.Label,u=e.Component},function(e){b=e.default},function(e){_=e.Logger}],execute:function(){var p,d,h,f,m,g,k,v,y;o._RF.push({},"00a7bQkA3ZO6rQAm0ZDNZMA","SkinItemAction",void 0);var A=a.ccclass,S=a.property;e("SkinItemAction",(p=A("SkinItemAction"),d=S(c),h=S(s),f=S(l),p((k=i((g=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,n(i,"bubu_sprite",k,r(i)),n(i,"border_node",v,r(i)),n(i,"coin_label",y,r(i)),i.index_name=0,i.skin_action=null,i}t(i,e);var o=i.prototype;return o.start=function(){},o.update=function(e){},o.init=function(e,i,t,n,r){var o=this;this.skin_action=r,this.index_name=e,this.coin_label.string=n+"",i.forEach((function(i){i==e&&(o.coin_label.string="0")})),this.bubu_sprite&&(this.bubu_sprite.spriteFrame=b.instance.get_ui("bubu_"+e)),this.border_node&&(this.border_node.active=!1),this.index_name==t&&(this.border_node.active=!0)},o.on_click_item=function(){this.border_node&&(this.border_node.active=!0),this.skin_action&&this.skin_action.select_item(this.index_name),_.log("SkinItemAction: 点击了皮肤项 ",this.index_name)},i}(u)).prototype,"bubu_sprite",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=i(g.prototype,"border_node",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=i(g.prototype,"coin_label",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=g))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/TipsAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcePool.ts"],(function(e){var t,n,o,i,r,a,l,s,c,u,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Label,s=e.Node,c=e.tween,u=e.Vec3,p=e.Component},function(e){d=e.ResourcePool}],execute:function(){var f,_,h,v,b,w,y,g,k;r._RF.push({},"8a067Y6r0FE9bkvju6Pxv/E","TipsAction",void 0);var O=a.ccclass,A=a.property,P=e("TIPS_TYPE",function(e){return e[e.COMMON=0]="COMMON",e[e.OK=1]="OK",e[e.WARN=2]="WARN",e}({}));e("TipsAction",(f=O("TipsAction"),_=A({type:l}),h=A({type:s}),v=A({type:s}),f((y=t((w=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"level_label",y,i(t)),o(t,"ok_node",g,i(t)),o(t,"warn_node",k,i(t)),t}n(t,e);var r=t.prototype;return r.start=function(){},r.set_default=function(){this.node.setPosition(0,-250),this.node.active=!0},r.update=function(e){},r.show=function(e,t){switch(this.ok_node&&(this.ok_node.active=!1),this.warn_node&&(this.warn_node.active=!1),t){case P.OK:this.ok_node&&(this.ok_node.active=!0);break;case P.WARN:this.warn_node&&(this.warn_node.active=!0)}var n=this;n.level_label.string=e,n.set_default(),c(n.node).to(.85,{position:new u(0,0,0)},{easing:"quadInOut"}).delay(1).to(.5,{position:new u(0,200,0)},{easing:"quadInOut"}).call((function(){d.instance.remove_node(n.node)})).start()},t}(p)).prototype,"level_label",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(w.prototype,"ok_node",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(w.prototype,"warn_node",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=w))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/TipsManagerAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcePool.ts","./TipsAction.ts"],(function(n){var o,t,e,i,c,s,r;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,e=n._decorator,i=n.director,c=n.Component},function(n){s=n.ResourcePool},function(n){r=n.TipsAction}],execute:function(){var a,u;t._RF.push({},"43544cCaQFGZ4yxfpsqdahR","TipsManagerAction",void 0);var p=e.ccclass;e.property,n("TipsManagerAction",p("TipsManagerAction")(((u=function(n){function t(){return n.apply(this,arguments)||this}o(t,n);var e=t.prototype;return e.onLoad=function(){t.instance=this,i.addPersistRootNode(this.node)},e.update=function(n){},t.show=function(n,o){var e=t.instance.node;s.instance.create_by_Pool("Tips",e.worldPosition,e).then((function(t){var e=t.getComponent(r);e&&e.show(n,o)}))},t}(c)).instance=null,a=u))||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/Tools.ts",["cc"],(function(r){var t,e,n,o,i;return{setters:[function(r){t=r.cclegacy,e=r._decorator,n=r.UITransform,o=r.Rect,i=r.tween}],execute:function(){var a;t._RF.push({},"0f695ttxe5CWL3NcrWbvzLj","Tools",void 0);var u=e.ccclass,c=(e.property,{year:"numeric",month:"2-digit",day:"2-digit"});r("Tools",u("Tools")(a=function(){function r(){}return r.createRect=function(r,t){var e=r.getComponent(n);if(e){var i=r.worldPosition;return t?(t.x=i.x-e.width*e.anchorX,t.y=i.y-e.height*e.anchorY,t.width=e.width,t.height=e.height,t):new o(i.x-e.width*e.anchorX,i.y-e.height*e.anchorY,e.width,e.height)}return null},r.setSpriteAlpha=function(r,t){r&&(r.opacity=255*t)},r.insertArr=function(r,t){r||(r=[]),r[r.length]=t},r.createNullMatrix=function(r,t){return Array(r).fill(null).map((function(){return Array(t).fill(null)}))},r.getRowsByArr=function(t,e){if(t&&t.length>0){for(var n=t.length,o=[],i=0;i<n;i++)r.insertArr(o,t[i][e]);return o}return null},r.TweenAlphaAni=function(r,t,e){if(r)return i(r).to(e,{opacity:255*t})},r.getNumberShow=function(r){if(0===r)return"0";for(var t=["","K","M","B","T","Q"],e=0,n=Math.abs(r);n>=1e3&&e<t.length-1;)n/=1e3,e++;var o=n.toFixed(2).replace(/\.?0+$/,"");return o.endsWith(".")&&(o=o.replace(".","")),(r<0?"-":"")+o+t[e]},r.random_between_floor=function(r,t){var e=Math.random()*(t-r)+r;return Math.floor(e)},r.getNumberShow_1=function(r){if(0===r)return"0";for(var t=["","K","M","B","T","Q"],e=0,n=Math.abs(r);n>=1e3&&e<t.length-1;)n/=1e3,e++;var o=n.toFixed(2).replace(/\.?0+$/,"");return o.endsWith(".")&&(o=o.replace(".","")),(r<0?"-":"")+o},r.getNumberShow_2=function(r){if(0===r)return"0";for(var t=["","k","m","b","t","q"],e=0,n=Math.abs(r);n>=1e3&&e<t.length-1;)n/=1e3,e++;var o=n.toFixed(2).replace(/\.?0+$/,"");return o.endsWith(".")&&(o=o.replace(".","")),t[e]},r.getTodayDateString=function(){return(new Date).toLocaleDateString(void 0,c)},r.shuffleArray=function(r){for(var t,e=r.length;0!==e;){t=Math.floor(Math.random()*e),e--;var n=[r[t],r[e]];r[e]=n[0],r[t]=n[1]}return r},r}())||a);t._RF.pop()}}}));

System.register("chunks:///_virtual/TrailAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourcePool.ts"],(function(t){var i,e,r,o,n,s,a,l,c,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,a=t.Color,l=t.Sprite,c=t.Component},function(t){p=t.ResourcePool}],execute:function(){var u,h,f,d,m,v,g;n._RF.push({},"159b08kQTBKA762+Iv33xUH","TrailAction",void 0);var y=s.ccclass,T=s.property;t("TrailAction",(u=y("TrailAction"),h=T({range:[.1,1,.1]}),f=T({range:[1,50,1]}),u((v=i((m=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return i=t.call.apply(t,[this].concat(n))||this,r(i,"lifeTime",v,o(i)),r(i,"startSize",g,o(i)),i.timeElapsed=0,i.sprite=null,i.startColor=new a,i}e(i,t);var n=i.prototype;return n.onLoad=function(){this.sprite=this.getComponent(l),this.sprite&&(this.startColor=this.sprite.color.clone())},n.init_=function(t){this.timeElapsed=0,this.sprite&&(this.sprite.color=this.startColor.clone(),this.node.active=!0),this.update_direction(t)},n.update_direction=function(t){this.node.angle=t>0?45:t<0?-45:0},n.update=function(t){if(this.timeElapsed+=t,this.timeElapsed/this.lifeTime>=1)return this.node.active=!1,void p.instance.remove_node(this.node);if(this.sprite){var i=this.sprite.color;this.sprite.color=i}},i}(c)).prototype,"lifeTime",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),g=i(m.prototype,"startSize",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),d=m))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/UILayerAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Global.ts","./ResourcePool.ts","./BaseWindows.ts","./AudioManager.ts","./Enums.ts","./Logger.ts"],(function(n){var o,t,i,e,s,c,r,a,u,l,d;return{setters:[function(n){o=n.inheritsLoose},function(n){t=n.cclegacy,i=n._decorator,e=n.Vec3,s=n.Component},function(n){c=n.Global},function(n){r=n.ResourcePool},function(n){a=n.BaseWindows},function(n){u=n.AudioManager},function(n){l=n.GAME_STATE},function(n){d=n.Logger}],execute:function(){var f;t._RF.push({},"e15c4sTIF1Fb5/ugOpASC4l","UILayerAction",void 0);var w=i.ccclass;i.property,n("UILayerAction",w("UILayerAction")(f=function(n){function t(){for(var o,t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return(o=n.call.apply(n,[this].concat(i))||this).windows=void 0,o}o(t,n);var i=t.prototype;return i.onLoad=function(){c.ui_layer_action=this,this.windows=new Map},i.start=function(){},i.update=function(n){},i.show_win=function(n,o,t,i){var s=this;void 0===o&&(o=null),void 0===t&&(t=!0),void 0===i&&(i=l.PAUSE),t&&u.instance.play_shot("btn_1");var c=this.windows.get(n);if(c)return c.show_windows(o,i),c;r.instance.create_by_Pool(n,e.ZERO,this.node).then((function(t){var i=t.getComponent(a);return s.windows.set(n,i),i.show_windows(o),i})).catch((function(n){d.log(n)}))},t}(s))||f);t._RF.pop()}}}));

System.register("chunks:///_virtual/WinAction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts","./BaseWindows.ts","./XStorage.ts","./EventsManager.ts","./Enums.ts","./Global.ts","./Logger.ts"],(function(n){var t,e,i,o,a,c,l,r,s,u,_,p,h,d,f,v,g,y,w;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized,a=n.asyncToGenerator,c=n.regeneratorRuntime},function(n){l=n.cclegacy,r=n._decorator,s=n.Label,u=n.ParticleSystem2D,_=n.Node},function(n){p=n.AudioManager},function(n){h=n.BaseWindows},function(n){d=n.XStorage},function(n){f=n.EventsManager},function(n){v=n.GAME_STATE,g=n.EventTyps},function(n){y=n.Global},function(n){w=n.Logger}],execute:function(){var b,m,A,L,E,S,T,M,R,W,z;l._RF.push({},"548d50Pd5hDBpCrI6S9NiGD","WinAction",void 0);var D=r.ccclass,G=r.property;n("WinAction",(b=D("WinAction"),m=G(s),A=G(u),L=G(_),E=G(s),b((M=t((T=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];return t=n.call.apply(n,[this].concat(a))||this,i(t,"distance_label",M,o(t)),i(t,"particle",R,o(t)),i(t,"coin_layout",W,o(t)),i(t,"coin_label",z,o(t)),t}e(t,n);var l=t.prototype;return l.start=function(){},l.update=function(n){},l.show_windows=function(t,e){void 0===t&&(t=null),void 0===e&&(e=v.PAUSE),n.prototype.show_windows.call(this,t,e),p.instance.play_shot("upgrade"),this.particle.resetSystem();var i=y.main_ui_action.distanceTraveled_M;this.distance_label.string=i+"";var o,a=y.game_layer_action._cur_lvl_action.cur_lvl,c=d.get_lvl_progress(),l=c.get(a);if((o=y.level_coin_map.get(a))>l&&o<=y.level_coin_map.get(a)){this.coin_layout.active=!0;var r=o-l;c.set(a,o),d.record_lvl_progress(c),d.record_coins(d.get_cur_coins()+r),this.coin_label.string=r+""}else this.coin_layout.active=!1},l.close_windows=function(t,e){n.prototype.close_windows.call(this,t,e)},l.on_click_next_lvl=function(){var n=a(c().mark((function n(){var t=this;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:p.instance.play_shot("btn_1"),this.close_windows(null,(function(){t.scheduleOnce((function(){var n=d.get_cur_lvl();f.Ins.dispatch(g.START_LVL,n),w.log("WinAction: 开始加载下一关，已延迟分帧。")}),.1)}));case 2:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),l.on_click_restart=function(){var n=this;p.instance.play_shot("btn_1"),this.close_windows(null,(function(){n.scheduleOnce((function(){var n=y.game_layer_action._cur_lvl_action.cur_lvl;f.Ins.dispatch(g.START_LVL,n)}),.1)}))},l.on_click_home=function(){var n=this;p.instance.play_shot("btn_1"),f.Ins.dispatch(g.CLEAR_GAME_LAYER),this.close_windows(null,(function(){n.scheduleOnce((function(){y.ui_layer_action.show_win("Home",null,!1)}),.1)}))},t}(h)).prototype,"distance_label",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=t(T.prototype,"particle",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=t(T.prototype,"coin_layout",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=t(T.prototype,"coin_label",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=T))||S));l._RF.pop()}}}));

System.register("chunks:///_virtual/WxPlatform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./Global.ts","./Tools.ts","./Logger.ts"],(function(t){var o,n,i,s,e,c,r;return{setters:[function(t){o=t.createClass},function(t){n=t.cclegacy,i=t._decorator},function(t){s=t.WECHAT},function(t){e=t.Global},function(t){c=t.Tools},function(t){r=t.Logger}],execute:function(){var a,u;n._RF.push({},"ed0eaZDUEFP+ZYsQMWtnN2T","WxPlatform",void 0);var h=i.ccclass;i.property,t("WxPlatform",h("WxPlatform")(((u=function(){function t(){this.wx=window.wx,this.pic=[{id:"O8T6h8l8RfWJQ6wkdF1AYw==",url:"https://mmocgame.qpic.cn/wechatgame/nicJCquRHTK4UU9dOfEP6MG48BxqAN64GT12JZcEPjc2VW1DQIIrWPAELtovwnq1z/0"},{id:"eT4m1csMTi2c+Hn13J051A==",url:"https://mmocgame.qpic.cn/wechatgame/yN0ib7IICvoibJysBia8x5NMmUZRN76LC8dYzMjSAETTmS6uQafsiciceNOL8mEq1gtwe/0"},{id:"Rve5UFnVTLu5np6gmn2NyA==",url:"https://mmocgame.qpic.cn/wechatgame/YZPoCIWzenGMNEANDZuCLbN94JFbSw24brKHvHhoHydyKndhNL8NpLicvfzQDlhby/0"}],this.avatar=void 0,this.name_Label=void 0,this.systemInfo=void 0,this.screenWidth=void 0,this.screenHeight=void 0,this.userInfo=void 0,this.rewardVideo=void 0,this.custom_arr=[],this.custom_show_status=!1,this.banner=void 0,this.banner_show_status=!1}var n=t.prototype;return n.wechat_get_user_info=function(){r.log("---------- 执行 wechat_get_user_info",s)},n.login=function(){r.log("22222 login ---------- 执行 wechat_get_user_info",s)},n.setAvatar=function(t){},n.wechat_setting=function(){r.log("wechat_setting",s)},n.show_interstitial=function(t){r.log("显示差评广告》〉》〉》〉》〉》〉》〉》")},n.show_reward_video=function(t){var o=this,n=this,i=e.ad_video_id;null!=n.rewardVideo&&n.rewardVideo.offClose(c);var s=this.wx.createRewardedVideoAd({adUnitId:i.trim()});n.rewardVideo=s,s.load().then((function(){o.wx.showToast({title:"看完视频领奖励",icon:"success",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),r.log("视频 广告加载成功"),s.show()})),s.onError((function(n){r.log("激励视频 广告显示失败",n),o.wx.showToast({title:"请稍后再试",icon:"fail",duration:1500,mask:!1,success:function(){},fail:function(){},complete:function(){}}),t(2)}));var c=function o(n){n&&n.isEnded?(r.log("res:  ",n),t(1),s.offClose(o)):(r.log("播放中退出"),t(0))};s.onClose(c)},n.destory_custom=function(){this.custom_arr.forEach((function(t){try{t.destroy()}catch(t){r.log("关闭 custom error...",t)}r.log("关闭 custom ...")})),this.custom_arr=[]},n.hide_custom=function(){r.log("隐藏销毁 cusTom"),this.custom_show_status=!1,this.destory_custom()},n.show_custom_ad=function(){if(0!=e.ad_custom_id.length){var t=e.ad_custom_id[c.random_between_floor(0,e.ad_custom_id.length)];this.custom_show_status=!0,r.log("ad_custom_id  原生模板 ID:",t)}},n.hide_banner=function(){this.banner_show_status=!1,null!=this.banner&&(this.banner.destroy(),this.banner=null,r.log("关闭 banner..."))},n.show_banner=function(t){},n.show_share=function(){this.get_random_pic()},n.get_random_pic=function(){var t=null;try{t=this.pic[c.random_between_floor(0,this.pic.length)]}catch(t){r.log("get_random_pic error:",t)}return this.pic||(t=this.pic[0]),t},n.wx_show_modal=function(){r.log("funcation is wx_show_modal",s)},o(t,null,[{key:"ins",get:function(){return this._ins||(this._ins=new t),this._ins}}]),t}())._ins=void 0,a=u))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/XStorage.ts",["cc","./Tools.ts","./Logger.ts","./Global.ts","./EventsManager.ts","./Enums.ts"],(function(t){var e,r,o,a,n,c,l;return{setters:[function(t){e=t.cclegacy,r=t._decorator},function(t){o=t.Tools},function(t){a=t.Logger},function(t){n=t.Global},function(t){c=t.EventsManager},function(t){l=t.EventTyps}],execute:function(){var _;e._RF.push({},"72b16ImcEhBfqaHpPprfuX/","XStorage",void 0);var i=r.ccclass,s=(r.property,"daily_lottery_data"),u="daily_level_fail_data";t("XStorage",i("XStorage")(_=function(){function t(){}return t.record_lvl_progress=function(t){var e=Array.from(t.entries()),r=JSON.stringify(e);localStorage.setItem("lvl_progress_map",r)},t.get_lvl_progress=function(){var t=localStorage.getItem("lvl_progress_map");if(t){var e=JSON.parse(t);return new Map(e)}return new Map},t.record_skin_arr=function(t,e){localStorage.setItem("skin_arr",JSON.stringify(t)),localStorage.setItem("cur_skin",e+"")},t.get_skin_arr=function(){var t=localStorage.getItem("skin_arr");return t?JSON.parse(t):[]},t.get_cur_skin=function(){var t=localStorage.getItem("cur_skin");return t?Number(t):(localStorage.setItem("cur_skin","1"),1)},t.record_cur_skin=function(t){localStorage.setItem("cur_skin",t+"")},t.previous_level=function(){var e=t.get_cur_lvl()-1;return e<1&&(e=1),t.record_cur_lvl(e),e},t.get_history_lvl=function(){var e=localStorage.getItem("history_lvl");return e?Number(e):(t.record_cur_lvl(1),1)},t.get_cur_lvl=function(){var t=localStorage.getItem("cur_lvl");return t?Number(t):(localStorage.setItem("cur_lvl","1"),1)},t.record_cur_lvl=function(t){localStorage.setItem("cur_lvl",t+"");var e=localStorage.getItem("history_lvl");e?t>Number(e)&&localStorage.setItem("history_lvl",t+""):localStorage.setItem("history_lvl",t+"")},t.get_cur_coins=function(){var t=localStorage.getItem("cur_coins");if(t){var e=Number(t);return e<0&&(e=0),e}return localStorage.setItem("cur_coins","0"),0},t.record_coins=function(t){t<0&&(t=0),localStorage.setItem("cur_coins",t+""),c.Ins.dispatch(l.UPDATE_COIN)},t.get_cur_score=function(){var t=localStorage.getItem("cur_score");if(t){var e=Number(t);return e<0&&(e=0),e}return localStorage.setItem("cur_score","0"),0},t.record_score=function(t){localStorage.setItem("cur_score",t+"")},t.is_new_player=function(){var t=localStorage.getItem("is_new_player");return t?0!=Number(t):(localStorage.setItem("is_new_player","1"),!0)},t.is_old_player=function(){localStorage.setItem("is_new_player","0")},t.get_gift=function(){var t=localStorage.getItem("gift");return t?Number(t):(localStorage.setItem("gift","0"),0)},t.record_gift=function(t){localStorage.setItem("gift",t+"")},t.get_last_lottery_date=function(){return localStorage.getItem("LAST_LOTTERY_DATE")},t.recode_last_lottery_date=function(){var t=o.getTodayDateString();localStorage.setItem("LAST_LOTTERY_DATE",t)},t.get_today_lottery_count=function(){var e=localStorage.getItem(s),r=(new Date).toDateString();if(e)try{var o=JSON.parse(e);if(o.date===r)return o.count}catch(t){a.error("XStorage: 解析抽奖数据失败",t)}return t._reset_lottery_data(),0},t.increase_today_lottery_count=function(e){var r=t.get_today_lottery_count(),o=(new Date).toDateString(),a=Math.min(r+1,e),n=JSON.stringify({date:o,count:a});localStorage.setItem(s,n)},t._reset_lottery_data=function(){var t=(new Date).toDateString(),e=JSON.stringify({date:t,count:0});localStorage.setItem(s,e)},t._get_today_fail_count=function(t){var e=localStorage.getItem(u),r=(new Date).toDateString(),o={date:r,counts:{}};if(e)try{var a=JSON.parse(e);a.date===r&&(o=a)}catch(t){}var n=o.counts[t.toString()]||0;return e&&o.date===r||localStorage.setItem(u,JSON.stringify(o)),n},t.increase_today_fail_count=function(t){var e=localStorage.getItem(u),r=(new Date).toDateString(),o={date:r,counts:{}};if(e)try{var a=JSON.parse(e);a.date===r&&(o=a)}catch(t){}var c=t.toString(),l=o.counts[c]||0,_=Math.min(l+1,n.MAX_FAIL_COUNT);o.counts[c]=_,localStorage.setItem(u,JSON.stringify(o))},t.reset_fail_count=function(t){var e=localStorage.getItem(u),r=(new Date).toDateString(),o={date:r,counts:{}};if(e)try{var a=JSON.parse(e);a.date===r&&(o=a)}catch(t){}o.counts[t.toString()]=0,localStorage.setItem(u,JSON.stringify(o))},t.is_show_fail_count_flag=function(e){var r=t._get_today_fail_count(e);return!n.is_review_model&&(!(e<4)&&!(r<n.MAX_FAIL_COUNT))},t}())||_);e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});